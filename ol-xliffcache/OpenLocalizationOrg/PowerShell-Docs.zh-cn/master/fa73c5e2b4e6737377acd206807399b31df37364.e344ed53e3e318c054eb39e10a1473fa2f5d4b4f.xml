{"nodes":[{"pos":[32,93],"content":"Restrict access to networks with Cisco ISE | Microsoft Intune","needQuote":true,"nodes":[{"content":"Restrict access to networks with Cisco ISE | Microsoft Intune","pos":[0,61]}]},{"pos":[107,256],"content":"Use Cisco ISE with Intune so that devices are Intune enrolled and policy compliant before they access Wi-Fi and VPN that are controlled by Cisco ISE.","needQuote":true,"nodes":[{"content":"Use Cisco ISE with Intune so that devices are Intune enrolled and policy compliant before they access Wi-Fi and VPN that are controlled by Cisco ISE.","pos":[0,149]}]},{"pos":[567,604],"content":"Using Cisco ISE with Microsoft Intune","linkify":"Using Cisco ISE with Microsoft Intune","nodes":[{"content":"Using Cisco ISE with Microsoft Intune","pos":[0,37]}]},{"content":"Intune integration with Cisco Identity Services Engine (ISE) allows you to author network policies in your ISE environment by using the Intune device-enrollment and compliance state.","pos":[605,787]},{"content":"You can use these policies to ensure that access to your company network is restricted to devices that are managed by Intune and compliant with Intune policies.","pos":[788,948]},{"pos":[953,972],"content":"Configuration steps","linkify":"Configuration steps","nodes":[{"content":"Configuration steps","pos":[0,19]}]},{"content":"To enable this integration, you don’t need to do any setup in your Intune tenant.","pos":[974,1055]},{"content":"You will need to provide permissions to your Cisco ISE server to access your Intune tenant.","pos":[1056,1147]},{"content":"After that's done, the rest of the setup happens in your Cisco ISE server.","pos":[1148,1222]},{"content":"This article gives you instructions on providing your ISE server with permissions to access your Intune tenant.","pos":[1223,1334]},{"pos":[1340,1371],"content":"Step 1: Manage the certificates","linkify":"Step 1: Manage the certificates","nodes":[{"content":"Step 1: Manage the certificates","pos":[0,31]}]},{"content":"Export the certificate from the Azure Active Directory (Azure AD) console, then import it into the Trusted Certificates store of the ISE console:","pos":[1372,1517]},{"pos":[1524,1544],"content":"Internet Explorer 11","linkify":"Internet Explorer 11","nodes":[{"content":"Internet Explorer 11","pos":[0,20]}]},{"content":"a.","pos":[1550,1552]},{"content":"Run Internet Explorer as an administrator, and sign in to the Azure AD console.","pos":[1553,1632]},{"content":"b.","pos":[1637,1639]},{"content":"Choose the lock icon in the address bar and choose <bpt id=\"p1\">**</bpt>View certificates<ept id=\"p1\">**</ept>.","pos":[1640,1713],"source":" Choose the lock icon in the address bar and choose **View certificates**."},{"content":"c.","pos":[1718,1720]},{"content":"On the <bpt id=\"p1\">**</bpt>Details<ept id=\"p1\">**</ept> tab of the certificate properties, choose <bpt id=\"p2\">**</bpt>Copy to file<ept id=\"p2\">**</ept>.","pos":[1721,1799],"source":" On the **Details** tab of the certificate properties, choose **Copy to file**."},{"content":"d.","pos":[1804,1806]},{"content":"In the <bpt id=\"p1\">**</bpt>Certificate export wizard<ept id=\"p1\">**</ept> welcome page, choose <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>.","pos":[1807,1874],"source":" In the **Certificate export wizard** welcome page, choose **Next**."},{"content":"e.","pos":[1879,1881]},{"content":"On the <bpt id=\"p1\">**</bpt>Export file format<ept id=\"p1\">**</ept> page, leave the default, <bpt id=\"p2\">**</bpt>DER encoded binary x.509 (.CER)<ept id=\"p2\">**</ept>, and choose <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>.","pos":[1882,1994],"source":" On the **Export file format** page, leave the default, **DER encoded binary x.509 (.CER)**, and choose **Next**."},{"content":"f.","pos":[2001,2003]},{"content":"On the <bpt id=\"p1\">**</bpt>File to export<ept id=\"p1\">**</ept> page, choose <bpt id=\"p2\">**</bpt>Browse<ept id=\"p2\">**</ept> to pick a location in which to save the file, and provide a file name.","pos":[2004,2124],"source":" On the **File to export** page, choose **Browse** to pick a location in which to save the file, and provide a file name."},{"content":"Though it seems like you’re picking a file to export, you’re actually naming the file that the exported certificate will be saved to.","pos":[2125,2258]},{"content":"Choose <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Finish<ept id=\"p2\">**</ept>.","pos":[2259,2291],"source":" Choose **Next** &gt; **Finish**."},{"content":"g.","pos":[2296,2298]},{"content":"From within the ISE console, import the Intune certificate (the file you exported) into the  <bpt id=\"p1\">**</bpt>Trusted Certificates<ept id=\"p1\">**</ept> store.","pos":[2299,2423],"source":" From within the ISE console, import the Intune certificate (the file you exported) into the  **Trusted Certificates** store."},{"pos":[2430,2436],"content":"Safari","linkify":"Safari","nodes":[{"content":"Safari","pos":[0,6]}]},{"content":"a.","pos":[2439,2441]},{"content":"Sign in to the Azure AD console.","pos":[2442,2474]},{"content":"b.","pos":[2476,2478]},{"content":"Choose the lock icon <ph id=\"ph1\">&amp;gt;</ph>  <bpt id=\"p1\">**</bpt>More information<ept id=\"p1\">**</ept>.","pos":[2479,2527],"source":" Choose the lock icon &gt;  **More information**."},{"content":"c.","pos":[2532,2534]},{"content":"Choose <bpt id=\"p1\">**</bpt>View certificate<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Details<ept id=\"p2\">**</ept>.","pos":[2535,2580],"source":" Choose **View certificate** &gt; **Details**."},{"content":"d.","pos":[2585,2587]},{"content":"Choose the certificate, and then choose <bpt id=\"p1\">**</bpt>Export<ept id=\"p1\">**</ept>.","pos":[2588,2639],"source":" Choose the certificate, and then choose **Export**."},{"content":"e.","pos":[2645,2647]},{"content":"From within the ISE console, import the Intune certificate (the file you exported) into the  <bpt id=\"p1\">**</bpt>Trusted Certificates<ept id=\"p1\">**</ept> store.","pos":[2648,2772],"source":" From within the ISE console, import the Intune certificate (the file you exported) into the  **Trusted Certificates** store."},{"content":"Check the expiration date of the certificate, as you will have to export and import a new certificate when this one expires.","pos":[2793,2917]},{"pos":[2924,2958],"content":"Obtain a self-signed cert from ISE","linkify":"Obtain a self-signed cert from ISE","nodes":[{"content":"Obtain a self-signed cert from ISE","pos":[0,34]}]},{"pos":[2965,3094],"content":"In the ISE console, go to <bpt id=\"p1\">**</bpt>Administration<ept id=\"p1\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p2\">**</bpt>Certificates<ept id=\"p2\">**</ept><ph id=\"ph2\"> &gt; </ph><bpt id=\"p3\">**</bpt>System Certificates<ept id=\"p3\">**</ept><ph id=\"ph3\"> &gt; </ph><bpt id=\"p4\">**</bpt>Generate Self Signed Certificate<ept id=\"p4\">**</ept>.","source":"In the ISE console, go to **Administration** > **Certificates** > **System Certificates** > **Generate Self Signed Certificate**."},{"content":"Export the self-signed certificate.","pos":[3106,3141]},{"pos":[3145,3302],"content":"In a text editor, edit the exported certificate: [comment]: &lt;&gt; I'd rather not put a period at the end of these two statements, I think it could be confusing.","source":"In a text editor, edit the exported certificate:\n[comment]: <> I'd rather not put a period at the end of these two statements, I think it could be confusing."},{"pos":[3306,3345],"content":"Delete <bpt id=\"p1\">**</bpt> -----BEGIN CERTIFICATE-----<ept id=\"p1\">**</ept>","source":"Delete ** -----BEGIN CERTIFICATE-----**"},{"pos":[3349,3386],"content":"Delete <bpt id=\"p1\">**</bpt> -----END CERTIFICATE-----<ept id=\"p1\">**</ept>","source":"Delete ** -----END CERTIFICATE-----**"},{"content":"Ensure all of the text is a single line","pos":[3389,3428]},{"pos":[3435,3488],"content":"Step 2: Create an app for ISE in your Azure AD tenant","linkify":"Step 2: Create an app for ISE in your Azure AD tenant","nodes":[{"content":"Step 2: Create an app for ISE in your Azure AD tenant","pos":[0,53]}]},{"pos":[3492,3621],"content":"In the Azure AD console, choose <bpt id=\"p1\">**</bpt>Applications<ept id=\"p1\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p2\">**</bpt>Add an Application<ept id=\"p2\">**</ept><ph id=\"ph2\"> &gt; </ph><bpt id=\"p3\">**</bpt>Add an application my organization is developing<ept id=\"p3\">**</ept>.","source":"In the Azure AD console, choose **Applications** > **Add an Application** > **Add an application my organization is developing**."},{"content":"Provide a name and a URL for the app.","pos":[3625,3662]},{"content":"The URL could be your company website.","pos":[3663,3701]},{"content":"Download the app manifest (a JSON file).","pos":[3705,3745]},{"content":"Edit the manifest JSON file.","pos":[3749,3777]},{"content":"In the setting called <bpt id=\"p1\">**</bpt>keyCredentials<ept id=\"p1\">**</ept>, provide the edited certificate text from Step 1 as the setting value.","pos":[3778,3889],"source":" In the setting called **keyCredentials**, provide the edited certificate text from Step 1 as the setting value."},{"content":"Save the file without changing its name.","pos":[3893,3933]},{"content":"Provide your app with permissions to Microsoft Graph and the Microsoft Intune API.","pos":[3937,4019]},{"content":"a.","pos":[4022,4024]},{"content":"For Microsoft Graph, choose the following:","pos":[4025,4067]},{"pos":[4074,4122],"content":"<bpt id=\"p1\">**</bpt>Application permissions<ept id=\"p1\">**</ept>: Read directory data","source":"**Application permissions**: Read directory data"},{"pos":[4129,4155],"content":"<bpt id=\"p1\">**</bpt>Delegated permissions<ept id=\"p1\">**</ept>:","source":"**Delegated permissions**:"},{"content":"Access user’s data anytime","pos":[4166,4192]},{"content":"Sign users in","pos":[4203,4216]},{"content":"b.","pos":[4219,4221]},{"content":"For the Microsoft Intune API, in <bpt id=\"p1\">**</bpt>Application permissions<ept id=\"p1\">**</ept>, choose <bpt id=\"p2\">**</bpt>Get device state and compliance from Intune<ept id=\"p2\">**</ept>.","pos":[4222,4339],"source":" For the Microsoft Intune API, in **Application permissions**, choose **Get device state and compliance from Intune**."},{"pos":[4344,4436],"content":"Choose <bpt id=\"p1\">**</bpt>View Endpoints<ept id=\"p1\">**</ept> and copy the following values for use in configuring ISE settings:","source":"Choose **View Endpoints** and copy the following values for use in configuring ISE settings:"},{"content":"Value in Azure AD portal","pos":[4439,4463]},{"content":"Corresponding field in ISE portal","pos":[4464,4497]},{"content":"Microsoft Azure AD Graph API endpoint","pos":[4556,4593]},{"content":"Auto Discovery URL","pos":[4594,4612]},{"content":"Oauth 2.0 Token endpoint","pos":[4615,4639]},{"content":"Token Issuing URL","pos":[4640,4657]},{"content":"Update your code with your Client ID","pos":[4660,4696]},{"content":"Client ID","pos":[4697,4706]},{"pos":[4713,4805],"content":"Step 4: Upload the self-signed certificate from ISE into the ISE app you created in Azure AD","linkify":"Step 4: Upload the self-signed certificate from ISE into the ISE app you created in Azure AD","nodes":[{"content":"Step 4: Upload the self-signed certificate from ISE into the ISE app you created in Azure AD","pos":[0,92]}]},{"content":"Get the base64 encoded cert value and thumbprint from a .cer X509 public cert file.","pos":[4813,4896]},{"content":"This example uses PowerShell:","pos":[4897,4926]},{"content":"Store the values for $base64Thumbprint, $base64Value and $keyid, to be used in the next step.","pos":[5316,5409]},{"content":"Upload the certificate through the manifest file.","pos":[5419,5468]},{"content":"Log in to the <bpt id=\"p1\">[</bpt>Azure Management Portal<ept id=\"p1\">](https://manage.windowsazure.com)</ept>","pos":[5469,5541],"source":" Log in to the [Azure Management Portal](https://manage.windowsazure.com)"},{"content":"In to the Azure AD snap-in find the application that you want to configure with an X.509 certificate.","pos":[5550,5651]},{"content":"Download the application manifest file.","pos":[5660,5699]},{"content":"Replace the empty “KeyCredentials”: [], property with the following JSON.","pos":[5709,5782]},{"content":"The KeyCredentials complex type is documented in<bpt id=\"p1\">[</bpt>Entity and complex type reference<ept id=\"p1\">](https://msdn.microsoft.com/library/azure/ad/graph/api/entity-and-complex-type-reference#KeyCredentialType)</ept>.","pos":[5784,5975],"source":"  The KeyCredentials complex type is documented in[Entity and complex type reference](https://msdn.microsoft.com/library/azure/ad/graph/api/entity-and-complex-type-reference#KeyCredentialType)."},{"content":"For example:","pos":[6243,6255]},{"content":"Save the change to the application manifest file.","pos":[6573,6622]},{"content":"Upload the edited application manifest file through the Azure management mortal.","pos":[6631,6711]},{"content":"Optional:  Download the manifest again, to check that your X.509 cert is present on the application.","pos":[6720,6820]},{"content":"KeyCredentials is a collection, so you can upload multiple X.509 certificates for rollover scenarios, or delete certficates in compromise scenarios.","pos":[6835,6983]},{"pos":[6990,7020],"content":"Step 4: Configure ISE Settings","linkify":"Step 4: Configure ISE Settings","nodes":[{"content":"Step 4: Configure ISE Settings","pos":[0,30]}]},{"content":"In the ISE admin console, provide these setting values:","pos":[7021,7076]},{"pos":[7081,7119],"content":"<bpt id=\"p1\">**</bpt>Server Type<ept id=\"p1\">**</ept>: Mobile Device Manager","source":"**Server Type**: Mobile Device Manager"},{"pos":[7124,7175],"content":"<bpt id=\"p1\">**</bpt>Authentication type<ept id=\"p1\">**</ept>: OAuth – Client Credentials","source":"**Authentication type**: OAuth – Client Credentials"},{"pos":[7180,7203],"content":"<bpt id=\"p1\">**</bpt>Auto Discovery<ept id=\"p1\">**</ept>: Yes","source":"**Auto Discovery**: Yes"},{"pos":[7208,7261],"content":"<bpt id=\"p1\">**</bpt>Auto Discover URL<ept id=\"p1\">**</ept>: <bpt id=\"p2\">*</bpt>Enter the value from Step 1.<ept id=\"p2\">*</ept>","source":"**Auto Discover URL**: *Enter the value from Step 1.*"},{"pos":[7266,7311],"content":"<bpt id=\"p1\">**</bpt>Client ID<ept id=\"p1\">**</ept>: <bpt id=\"p2\">*</bpt>Enter the value from Step 1.<ept id=\"p2\">*</ept>","source":"**Client ID**: *Enter the value from Step 1.*"},{"pos":[7316,7369],"content":"<bpt id=\"p1\">**</bpt>Token issuing URL<ept id=\"p1\">**</ept>: <bpt id=\"p2\">*</bpt>Enter the value from Step 1.<ept id=\"p2\">*</ept>","source":"**Token issuing URL**: *Enter the value from Step 1.*"},{"pos":[7376,7447],"content":"Information shared between your Intune tenant and your Cisco ISE server","linkify":"Information shared between your Intune tenant and your Cisco ISE server","nodes":[{"content":"Information shared between your Intune tenant and your Cisco ISE server","pos":[0,71]}]},{"content":"This table lists the information that is shared between your Intune tenant and your Cisco ISE server for devices that are managed by Intune.","pos":[7448,7588]},{"content":"Property","pos":[7591,7599]},{"content":"Description","pos":[7602,7613]},{"content":"complianceState","pos":[7695,7710]},{"content":"The true or false string that indicates whether the device is compliant or noncompliant.","pos":[7711,7799]},{"content":"isManaged","pos":[7802,7811]},{"content":"The true or false string that indicates whether the client is managed by Intune or not.","pos":[7812,7899]},{"content":"macAddress","pos":[7902,7912]},{"content":"The MAC address of the device.","pos":[7913,7943]},{"content":"serialNumber","pos":[7946,7958]},{"content":"The serial number of the device.","pos":[7959,7991]},{"content":"It applies only to iOS devices.","pos":[7992,8023]},{"content":"imei","pos":[8026,8030]},{"content":"The IMEI (15 decimal digits: 14 digits plus a check digit) or IMEISV (16 digits) number includes information on the origin, model, and serial number of the device.","pos":[8031,8194]},{"content":"The structure of this number is specified in 3GPP TS 23.003.","pos":[8195,8255]},{"content":"It applies only to devices with SIM cards.","pos":[8256,8298]},{"content":"udid","pos":[8301,8305]},{"content":"The Unique Device Identifier, which is a sequence of 40 letters and numbers.","pos":[8306,8382]},{"content":"It is specific to iOS devices.","pos":[8383,8413]},{"content":"meid","pos":[8416,8420]},{"content":"The mobile equipment identifier, which is a globally unique number that identifies a physical piece of CDMA mobile station equipment.","pos":[8421,8554]},{"content":"The number format is defined by the 3GPP2 report S. R0048.","pos":[8555,8613]},{"content":"However, in practical terms, it can be seen as an IMEI, but with hexadecimal digits.","pos":[8614,8698]},{"content":"An MEID is 56 bits long (14 hex digits).","pos":[8699,8739]},{"content":"It consists of three fields, including an 8-bit regional code (RR), a 24-bit manufacturer code, and a 24-bit manufacturer-assigned serial number.","pos":[8740,8885]},{"content":"osVersion","pos":[8888,8897]},{"content":"The operating system version for the device.","pos":[8898,8942]},{"content":"model","pos":[8944,8949]},{"content":"The device model.","pos":[8950,8967]},{"content":"manufacturer","pos":[8969,8981]},{"content":"The device manufacturer.","pos":[8982,9006]},{"content":"azureDeviceId","pos":[9008,9021]},{"content":"The device ID after it has workplace joined with Azure AD.","pos":[9022,9080]},{"content":"It is an empty GUID for devices that are not joined.","pos":[9081,9133]},{"content":"lastContactTimeUtc","pos":[9136,9154]},{"content":"The date and time when the device last checked in with the Intune management service.","pos":[9155,9240]},{"pos":[9246,9261],"content":"User experience","linkify":"User experience","nodes":[{"content":"User experience","pos":[0,15]}]},{"content":"When a user attempts to access resources by using an unenrolled device, they receive a prompt to enroll, such as the one shown here:","pos":[9263,9395]},{"content":"Example of enrollment prompt","pos":[9399,9427]},{"content":"When a user chooses to enroll, they are redirected to the Intune enrollment process.","pos":[9466,9550]},{"content":"The user enrollment experience for Intune is described in these topics:","pos":[9551,9622]},{"content":"Enroll your Android device in Intune","pos":[9627,9663]},{"content":"Enroll your iOS device in Intune","pos":[9727,9759]},{"content":"Enroll your Mac OS X device in Intune","pos":[9819,9856]},{"content":"Enroll your Windows device in Intune","pos":[9921,9957]},{"pos":[10019,10228],"content":"There is also a <bpt id=\"p1\">[</bpt>downloadable set of enrollment instructions<ept id=\"p1\">](https://gallery.technet.microsoft.com/End-user-Intune-enrollment-55dfd64a)</ept> that you can use to create customized guidance for your user experience.","source":"There is also a [downloadable set of enrollment instructions](https://gallery.technet.microsoft.com/End-user-Intune-enrollment-55dfd64a) that you can use to create customized guidance for your user experience."},{"pos":[10235,10243],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"content":"Cisco Identity Services Engine Administrator Guide, Release 2.1","pos":[10246,10309]}],"content":"---\n# required metadata\n\ntitle: Restrict access to networks with Cisco ISE | Microsoft Intune\ndescription: Use Cisco ISE with Intune so that devices are Intune enrolled and policy compliant before they access Wi-Fi and VPN that are controlled by Cisco ISE.\nkeywords:\nauthor: nbigman\nmanager: angrobe\nms.date: 09/08/2016\nms.topic: article\nms.prod:\nms.service: microsoft-intune\nms.technology:\nms.assetid: 5631bac3-921d-438e-a320-d9061d88726c\n\n# optional metadata\n\n#ROBOTS:\n#audience:\n#ms.devlang:\nms.reviewer: muhosabe\nms.suite: ems\n#ms.tgt_pltfrm:\n#ms.custom:\n\n---\n\n# Using Cisco ISE with Microsoft Intune\nIntune integration with Cisco Identity Services Engine (ISE) allows you to author network policies in your ISE environment by using the Intune device-enrollment and compliance state. You can use these policies to ensure that access to your company network is restricted to devices that are managed by Intune and compliant with Intune policies.\n\n## Configuration steps\n\nTo enable this integration, you don’t need to do any setup in your Intune tenant. You will need to provide permissions to your Cisco ISE server to access your Intune tenant. After that's done, the rest of the setup happens in your Cisco ISE server. This article gives you instructions on providing your ISE server with permissions to access your Intune tenant.\n\n### Step 1: Manage the certificates\nExport the certificate from the Azure Active Directory (Azure AD) console, then import it into the Trusted Certificates store of the ISE console:\n\n#### Internet Explorer 11\n\n\n   a. Run Internet Explorer as an administrator, and sign in to the Azure AD console.\n\n   b. Choose the lock icon in the address bar and choose **View certificates**.\n\n   c. On the **Details** tab of the certificate properties, choose **Copy to file**.\n\n   d. In the **Certificate export wizard** welcome page, choose **Next**.\n\n   e. On the **Export file format** page, leave the default, **DER encoded binary x.509 (.CER)**, and choose **Next**.  \n\n   f. On the **File to export** page, choose **Browse** to pick a location in which to save the file, and provide a file name. Though it seems like you’re picking a file to export, you’re actually naming the file that the exported certificate will be saved to. Choose **Next** &gt; **Finish**.\n\n   g. From within the ISE console, import the Intune certificate (the file you exported) into the  **Trusted Certificates** store.\n\n#### Safari\n\n a. Sign in to the Azure AD console.\n\nb. Choose the lock icon &gt;  **More information**.\n\n   c. Choose **View certificate** &gt; **Details**.\n\n   d. Choose the certificate, and then choose **Export**. \n\n   e. From within the ISE console, import the Intune certificate (the file you exported) into the  **Trusted Certificates** store.\n\n> [!IMPORTANT]\n>\n> Check the expiration date of the certificate, as you will have to export and import a new certificate when this one expires.\n\n\n### Obtain a self-signed cert from ISE \n\n1.  In the ISE console, go to **Administration** > **Certificates** > **System Certificates** > **Generate Self Signed Certificate**.  \n2.       Export the self-signed certificate.\n3. In a text editor, edit the exported certificate:\n[comment]: <> I'd rather not put a period at the end of these two statements, I think it could be confusing.\n - Delete ** -----BEGIN CERTIFICATE-----**\n - Delete ** -----END CERTIFICATE-----**\n \nEnsure all of the text is a single line\n\n\n### Step 2: Create an app for ISE in your Azure AD tenant\n1. In the Azure AD console, choose **Applications** > **Add an Application** > **Add an application my organization is developing**.\n2. Provide a name and a URL for the app. The URL could be your company website.\n3. Download the app manifest (a JSON file).\n4. Edit the manifest JSON file. In the setting called **keyCredentials**, provide the edited certificate text from Step 1 as the setting value.\n5. Save the file without changing its name.\n6. Provide your app with permissions to Microsoft Graph and the Microsoft Intune API.\n\n a. For Microsoft Graph, choose the following:\n    - **Application permissions**: Read directory data\n    - **Delegated permissions**:\n        - Access user’s data anytime\n        - Sign users in\n\n b. For the Microsoft Intune API, in **Application permissions**, choose **Get device state and compliance from Intune**.\n\n7. Choose **View Endpoints** and copy the following values for use in configuring ISE settings:\n\n|Value in Azure AD portal|Corresponding field in ISE portal|\n|-------------------|---------------------------------|\n|Microsoft Azure AD Graph API endpoint|Auto Discovery URL|\n|Oauth 2.0 Token endpoint|Token Issuing URL|\n|Update your code with your Client ID|Client ID|\n\n### Step 4: Upload the self-signed certificate from ISE into the ISE app you created in Azure AD\n1.     Get the base64 encoded cert value and thumbprint from a .cer X509 public cert file. This example uses PowerShell:\n   \n      \n    `$cer = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2`\n     `$cer.Import(“mycer.cer”)`\n      `$bin = $cer.GetRawCertData()`\n      `$base64Value = [System.Convert]::ToBase64String($bin)`\n      `$bin = $cer.GetCertHash()`\n      `$base64Thumbprint = [System.Convert]::ToBase64String($bin)`\n      `$keyid = [System.Guid]::NewGuid().ToString()`\n \n    Store the values for $base64Thumbprint, $base64Value and $keyid, to be used in the next step.\n2.       Upload the certificate through the manifest file. Log in to the [Azure Management Portal](https://manage.windowsazure.com)\n2.      In to the Azure AD snap-in find the application that you want to configure with an X.509 certificate.\n3.      Download the application manifest file. \n5.      Replace the empty “KeyCredentials”: [], property with the following JSON.  The KeyCredentials complex type is documented in[Entity and complex type reference](https://msdn.microsoft.com/library/azure/ad/graph/api/entity-and-complex-type-reference#KeyCredentialType).\n\n \n    `“keyCredentials“: [`\n    `{`\n     `“customKeyIdentifier“: “$base64Thumbprint_from_above”,`\n     `“keyId“: “$keyid_from_above“,`\n     `“type”: “AsymmetricX509Cert”,`\n     `“usage”: “Verify”,`\n     `“value”:  “$base64Value_from_above”`\n     `}2. `\n     `], `\n \nFor example:\n \n    `“keyCredentials“: [`\n    `{`\n    `“customKeyIdentifier“: “ieF43L8nkyw/PEHjWvj+PkWebXk=”,`\n    `“keyId“: “2d6d849e-3e9e-46cd-b5ed-0f9e30d078cc”,`\n    `“type”: “AsymmetricX509Cert”,`\n    `“usage”: “Verify”,`\n    `“value”: “MIICWjCCAgSgAwIBA***omitted for brevity***qoD4dmgJqZmXDfFyQ”`\n    `}`\n    `],`\n \n6.      Save the change to the application manifest file.\n7.      Upload the edited application manifest file through the Azure management mortal.\n8.      Optional:  Download the manifest again, to check that your X.509 cert is present on the application.\n\n>[!NOTE]\n>\n> KeyCredentials is a collection, so you can upload multiple X.509 certificates for rollover scenarios, or delete certficates in compromise scenarios.\n\n\n### Step 4: Configure ISE Settings\nIn the ISE admin console, provide these setting values:\n  - **Server Type**: Mobile Device Manager\n  - **Authentication type**: OAuth – Client Credentials\n  - **Auto Discovery**: Yes\n  - **Auto Discover URL**: *Enter the value from Step 1.*\n  - **Client ID**: *Enter the value from Step 1.*\n  - **Token issuing URL**: *Enter the value from Step 1.*\n\n\n\n## Information shared between your Intune tenant and your Cisco ISE server\nThis table lists the information that is shared between your Intune tenant and your Cisco ISE server for devices that are managed by Intune.\n\n|Property|  Description|\n|---------------|------------------------------------------------------------|\n|complianceState|The true or false string that indicates whether the device is compliant or noncompliant.|\n|isManaged|The true or false string that indicates whether the client is managed by Intune or not.|\n|macAddress|The MAC address of the device.|\n|serialNumber|The serial number of the device. It applies only to iOS devices.|\n|imei|The IMEI (15 decimal digits: 14 digits plus a check digit) or IMEISV (16 digits) number includes information on the origin, model, and serial number of the device. The structure of this number is specified in 3GPP TS 23.003. It applies only to devices with SIM cards.|\n|udid|The Unique Device Identifier, which is a sequence of 40 letters and numbers. It is specific to iOS devices.|\n|meid|The mobile equipment identifier, which is a globally unique number that identifies a physical piece of CDMA mobile station equipment. The number format is defined by the 3GPP2 report S. R0048. However, in practical terms, it can be seen as an IMEI, but with hexadecimal digits. An MEID is 56 bits long (14 hex digits). It consists of three fields, including an 8-bit regional code (RR), a 24-bit manufacturer code, and a 24-bit manufacturer-assigned serial number.|\n|osVersion|The operating system version for the device.\n|model|The device model.\n|manufacturer|The device manufacturer.\n|azureDeviceId|The device ID after it has workplace joined with Azure AD. It is an empty GUID for devices that are not joined.|\n|lastContactTimeUtc|The date and time when the device last checked in with the Intune management service.\n\n\n## User experience\n\nWhen a user attempts to access resources by using an unenrolled device, they receive a prompt to enroll, such as the one shown here:\n\n![Example of enrollment prompt](../media/cisco-ise-user-iphone.png)\n\nWhen a user chooses to enroll, they are redirected to the Intune enrollment process. The user enrollment experience for Intune is described in these topics:\n\n- [Enroll your Android device in Intune](/intune/enduser/enroll-your-device-in-Intune-android)</br>\n- [Enroll your iOS device in Intune](/intune/enduser/enroll-your-device-in-intune-ios)</br>\n- [Enroll your Mac OS X device in Intune](/intune/enduser/enroll-your-device-in-intune-mac-os-x)</br>\n- [Enroll your Windows device in Intune](/intune/enduser/enroll-your-device-in-intune-windows)</br>\n\nThere is also a [downloadable set of enrollment instructions](https://gallery.technet.microsoft.com/End-user-Intune-enrollment-55dfd64a) that you can use to create customized guidance for your user experience.\n\n\n### See also\n\n[Cisco Identity Services Engine Administrator Guide, Release 2.1](http://www.cisco.com/c/en/us/td/docs/security/ise/2-1/admin_guide/b_ise_admin_guide_21/b_ise_admin_guide_20_chapter_01000.html#task_820C9C2A1A6647E995CA5AAB01E1CDEF)\n"}