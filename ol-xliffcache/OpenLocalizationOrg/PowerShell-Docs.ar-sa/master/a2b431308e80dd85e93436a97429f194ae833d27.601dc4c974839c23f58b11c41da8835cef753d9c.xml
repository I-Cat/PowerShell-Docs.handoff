{"nodes":[{"pos":[32,77],"content":"What's new in ATA version 1.6 | Microsoft ATA","needQuote":true,"nodes":[{"content":"What's new in ATA version 1.6 | Microsoft ATA","pos":[0,45]}]},{"pos":[91,152],"content":"Lists what was new in ATA version 1.6 along with known issues","needQuote":true,"nodes":[{"content":"Lists what was new in ATA version 1.6 along with known issues","pos":[0,61]}]},{"pos":[471,500],"content":"What's new in ATA version 1.6","linkify":"What's new in ATA version 1.6","nodes":[{"content":"What's new in ATA version 1.6","pos":[0,29]}]},{"content":"These release notes provide information about known issues in this version of  Advanced Threat Analytics.","pos":[501,606]},{"pos":[611,644],"content":"What's new in the ATA 1.6 update?","linkify":"What's new in the ATA 1.6 update?","nodes":[{"content":"What's new in the ATA 1.6 update?","pos":[0,33]}]},{"content":"The update to ATA 1.6 provides improvements in the following areas:","pos":[645,712]},{"content":"New detections","pos":[718,732]},{"content":"Improvements to existing detections","pos":[738,773]},{"content":"The ATA Lightweight Gateway","pos":[779,806]},{"content":"Automatic updates","pos":[812,829]},{"content":"Improved ATA Center performance","pos":[835,866]},{"content":"Lower storage requirements","pos":[872,898]},{"content":"Support for IBM QRadar","pos":[904,926]},{"pos":[932,946],"content":"New detections","linkify":"New detections","nodes":[{"content":"New detections","pos":[0,14]}]},{"content":"<bpt id=\"p1\">**</bpt>Malicious Data Protection Private Information Request<ept id=\"p1\">**</ept> Data Protection API (DPAPI) is a password-based data protection service.","pos":[951,1081],"source":"**Malicious Data Protection Private Information Request**\nData Protection API (DPAPI) is a password-based data protection service."},{"content":"This protection service is used by various applications that store user’s secrets, such as website passwords and file-share credentials.","pos":[1082,1218]},{"content":"In order to support password-loss scenarios, users can decrypt protected data by using a recovery key which does not involve their password.","pos":[1219,1359]},{"content":"In a domain environment, attackers can remotely steal the recovery key and use it to decrypt protected data on all domain joined computers.","pos":[1360,1499]},{"content":"<bpt id=\"p1\">**</bpt>Net Session Enumeration<ept id=\"p1\">**</ept> Reconnaissance is a key stage within the advanced attack kill chain.","pos":[1504,1600],"source":"**Net Session Enumeration**\nReconnaissance is a key stage within the advanced attack kill chain."},{"content":"Domain Controllers (DCs) function as file servers for the purpose of Group Policy Object distribution, using the Server Message Block (SMB) protocol.","pos":[1601,1750]},{"content":"As part of the reconnaissance phase, attackers can query the DC for all active SMB sessions on the server, allowing them to gain access to all users and IP addresses associated with those SMB sessions.","pos":[1751,1952]},{"content":"SMB session enumeration can be used by attackers for targeting sensitive accounts, helping them move laterally across the network.","pos":[1953,2083]},{"content":"<bpt id=\"p1\">**</bpt>Malicious replication requests<ept id=\"p1\">**</ept> In Active Directory environments, replication happens regularly between Domain Controllers.","pos":[2088,2214],"source":"**Malicious replication requests**\nIn Active Directory environments, replication happens regularly between Domain Controllers."},{"content":"An attacker can spoof an Active Directory replication request (sometimes impersonating a Domain Controller) allowing the attacker to retrieve the data stored in Active Directory, including password hashes, without utilizing more intrusive techniques like Volume Shadow Copy.","pos":[2215,2489]},{"content":"<bpt id=\"p1\">**</bpt>Detection of MS11-013 vulnerability<ept id=\"p1\">**</ept> There is an elevation of privilege vulnerability in Kerberos which allows for certain aspects of a Kerberos service ticket to be forged.","pos":[2494,2670],"source":"**Detection of MS11-013 vulnerability**\nThere is an elevation of privilege vulnerability in Kerberos which allows for certain aspects of a Kerberos service ticket to be forged."},{"content":"A malicious user or attacker who successfully exploits this vulnerability can obtain a token with elevated privileges on the Domain Controller.","pos":[2671,2814]},{"content":"<bpt id=\"p1\">**</bpt>Unusual protocol implementation<ept id=\"p1\">**</ept> Authentication requests (Kerberos or NTLM) are usually performed using a standard set of methods and protocols.","pos":[2819,2966],"source":"**Unusual protocol implementation**\nAuthentication requests (Kerberos or NTLM) are usually performed using a standard set of methods and protocols."},{"content":"However, in order to successfully authenticate, the request must meet only a specific set of requirements.","pos":[2967,3073]},{"content":"Attackers might implement these protocols with minor deviations from the standard implementation in the environment.","pos":[3074,3190]},{"content":"These deviations might indicate the presence of an attacker attempting to execute attacks such as Pass-The-Hash, Brute Force and others.","pos":[3191,3327]},{"pos":[3334,3369],"content":"Improvements to existing detections","linkify":"Improvements to existing detections","nodes":[{"content":"Improvements to existing detections","pos":[0,35]}]},{"content":"ATA 1.6 includes improved detection logic that reduces false-positive and false-negative scenarios for existing detections such as Golden Ticket, Honey Token, Brute Force and Remote Execution.","pos":[3370,3562]},{"pos":[3568,3595],"content":"The ATA Lightweight Gateway","linkify":"The ATA Lightweight Gateway","nodes":[{"content":"The ATA Lightweight Gateway","pos":[0,27]}]},{"content":"This version of ATA introduces a new deployment option for the ATA Gateway, which allows an ATA Gateway to be installed directly on the Domain Controller.","pos":[3596,3750]},{"content":"This deployment option removes non-critical functionality of the ATA Gateway and introduces dynamic resource management based on available resources on the DC, which makes sure the existing operations of the DC are not affected.","pos":[3751,3979]},{"content":"The ATA Lightweight Gateway reduces the cost of ATA deployment.","pos":[3980,4043]},{"content":"At the same time it makes deployment easier in branch sites, in which there is limited hardware resource capacity or inability to set up port-mirroring support.","pos":[4044,4204]},{"content":"For more information about the ATA Lightweight Gateway, see <bpt id=\"p1\">[</bpt>ATA architecture<ept id=\"p1\">](/advanced-threat-analytics/plan-design/ata-architecture#ata-gateway-and-ata-lightweight-gateway)</ept>","pos":[4205,4380],"source":"\nFor more information about the ATA Lightweight Gateway, see [ATA architecture](/advanced-threat-analytics/plan-design/ata-architecture#ata-gateway-and-ata-lightweight-gateway)"},{"pos":[4382,4625],"content":"For more information about deployment considerations and choosing the right type of gateways for you, see <bpt id=\"p1\">[</bpt>ATA capacity planning<ept id=\"p1\">](/advanced-threat-analytics/plan-design/ata-capacity-planning#choosing-the-right-gateway-type-for-your-deployment)</ept>","source":"For more information about deployment considerations and choosing the right type of gateways for you, see [ATA capacity planning](/advanced-threat-analytics/plan-design/ata-capacity-planning#choosing-the-right-gateway-type-for-your-deployment)"},{"pos":[4632,4649],"content":"Automatic updates","linkify":"Automatic updates","nodes":[{"content":"Automatic updates","pos":[0,17]}]},{"content":"Starting with version 1.6, it is possible to update the ATA Center using Microsoft Update.","pos":[4650,4740]},{"content":"In addition, the ATA Gateways can now be automatically updated using their standard communication channel to the ATA Center.","pos":[4741,4865]},{"pos":[4870,4901],"content":"Improved ATA Center performance","linkify":"Improved ATA Center performance","nodes":[{"content":"Improved ATA Center performance","pos":[0,31]}]},{"content":"With this version, a lighter database load and a more efficient way of running all detection enables many more domain controllers to be monitored with a single ATA Center.","pos":[4902,5073]},{"pos":[5079,5105],"content":"Lower storage requirements","linkify":"Lower storage requirements","nodes":[{"content":"Lower storage requirements","pos":[0,26]}]},{"content":"ATA 1.6 necessitates ignificantly less storage space to run the ATA Database, now requiring only 20% of the storage space used in previous versions.","pos":[5106,5254]},{"pos":[5260,5282],"content":"Support for IBM QRadar","linkify":"Support for IBM QRadar","nodes":[{"content":"Support for IBM QRadar","pos":[0,22]}]},{"content":"ATA now can now receive events from IBM's QRadar SIEM solution, in addition to the previously supported SIEM solutions.","pos":[5283,5402]},{"pos":[5407,5419],"content":"Known issues","linkify":"Known issues","nodes":[{"content":"Known issues","pos":[0,12]}]},{"content":"The following known issues exist in this version.","pos":[5420,5469]},{"pos":[5475,5532],"content":"Failure to recognize new path in manually moved databases","linkify":"Failure to recognize new path in manually moved databases","nodes":[{"content":"Failure to recognize new path in manually moved databases","pos":[0,57]}]},{"content":"In deployments in which the database path is manually moved, ATA deployment does not use the new database path for the update.","pos":[5534,5660]},{"content":"This may cause the following issues:","pos":[5661,5697]},{"content":"ATA may use all the free space in the system drive of the ATA Center, without circularly deleting old network activities.","pos":[5702,5823]},{"pos":[5828,5994],"content":"Updating ATA to version 1.6 may fail the pre-update Readiness Checks, as shown in the image below.\n  ![Failed readiness check](media/ata_failed_readinesschecks.png)","leadings":["","  "],"nodes":[{"content":"Updating ATA to version 1.6 may fail the pre-update Readiness Checks, as shown in the image below.","pos":[0,98]},{"content":"Failed readiness check","pos":[103,125]}]},{"content":"Before updating ATA to version 1.6, update the following registry key with the correct database path:","pos":[6013,6114]},{"pos":[6221,6265],"content":"Migration failure when updating from ATA 1.5","linkify":"Migration failure when updating from ATA 1.5","nodes":[{"content":"Migration failure when updating from ATA 1.5","pos":[0,44]}]},{"content":"When updating to ATA 1.6, the update process may fail with the following error code:","pos":[6266,6350]},{"pos":[6354,6541],"content":"Update ATA to 1.6 error<ph id=\"ph1\">](http://i.imgur.com/QrLSApr.png)</ph> If you see this error, review the deployment log in: <bpt id=\"p1\">**</bpt>C:\\Users<ph id=\"ph2\">\\&lt;</ph>User&gt;\\AppData\\Local\\Temp<ept id=\"p1\">**</ept>, and look for the following exception:","source":"Update ATA to 1.6 error](http://i.imgur.com/QrLSApr.png)\nIf you see this error, review the deployment log in: **C:\\Users\\<User>\\AppData\\Local\\Temp**, and look for the following exception:"},{"pos":[7013,7098],"content":"You may also see this error: System.ArgumentNullException: Value cannot be null.","source":"You may also see this error: \n    System.ArgumentNullException: Value cannot be null."},{"content":"If you see either of these errors, run the following workaround.","pos":[7104,7168]},{"pos":[7170,7185],"content":"<bpt id=\"p1\">**</bpt>Workaround<ept id=\"p1\">**</ept>:","source":"**Workaround**:"},{"content":"Move the folder \"data_old\" to a temporary folder (usually located in %ProgramFiles%\\Microsoft Advanced Threat Analytics\\Center\\MongoDB\\bin).","pos":[7192,7332]},{"content":"Uninstall the ATA Center v1.5, and delete all database data.","pos":[7337,7397]},{"content":"Uninstall ATA 1.5","pos":[7400,7417]},{"content":"Re-install ATA Center v1.5.","pos":[7455,7482]},{"content":"Make sure to use the same configuration as the previous ATA 1.5 installation (Certificates, IP addresses, DB path, etc.).","pos":[7483,7604]},{"content":"Stop these services in the following order:","pos":[7609,7652]},{"content":"Microsoft Advanced Threat Analytics Center","pos":[7661,7703]},{"content":"MongoDB","pos":[7712,7719]},{"content":"Replace the MongoDB database files with the files in the “data_old” folder.","pos":[7724,7799]},{"content":"Start these services in the following order:","pos":[7804,7848]},{"content":"MongoDB","pos":[7857,7864]},{"content":"Microsoft Advanced Threat Analytics Center","pos":[7873,7915]},{"content":"Review the logs to verify that the product is running without errors.","pos":[7920,7989]},{"pos":[7994,8198],"content":"<bpt id=\"p1\">[</bpt>Download<ept id=\"p1\">]</ept><bpt id=\"p2\">(http://aka.ms/ataremoveduplicateprofiles \"</bpt>Download<ept id=\"p2\">\")</ept> the \"RemoveDuplicateProfiles.exe\" tool and copy it to the main installation path (%ProgramFiles%\\Microsoft Advanced Threat Analytics\\Center)","source":"[Download](http://aka.ms/ataremoveduplicateprofiles \"Download\") the \"RemoveDuplicateProfiles.exe\" tool and copy it to the main installation path (%ProgramFiles%\\Microsoft Advanced Threat Analytics\\Center)"},{"content":"From an elevated command prompt, run “RemoveDuplicateProfiles.exe” and wait until it completes successfully.","pos":[8203,8311]},{"pos":[8316,8438],"content":"From here:  …\\Microsoft Advanced Threat Analytics\\Center\\MongoDB\\bin directory: <bpt id=\"p1\">**</bpt>Mongo ATA<ept id=\"p1\">**</ept>, type the following command:","source":"From here:  …\\Microsoft Advanced Threat Analytics\\Center\\MongoDB\\bin directory: **Mongo ATA**, type the following command:"},{"content":"db.SuspiciousActivities.remove({ \"_t\" : \"RemoteExecutionSuspiciousActivity\", \"DetailsRecords\" : { \"$elemMatch\" : { \"ReturnCode\" : null } } }, { \"_id\" : 1 });","pos":[8444,8601]},{"content":"Update workaround","pos":[8605,8622]},{"content":"This should return a WriteResult({ \"nRemoved\" : XX }) where “XX” is the number of Suspicious Activities that were deleted.","pos":[8657,8779]},{"content":"If the number is greater than 0, exit the command prompt, and continue with the update process.","pos":[8780,8875]},{"pos":[8882,8932],"content":"Net Framework 4.6.1 requires restarting the server","linkify":"Net Framework 4.6.1 requires restarting the server","nodes":[{"content":"Net Framework 4.6.1 requires restarting the server","pos":[0,50]}]},{"content":"In some cases, the installation of .Net Framework 4.6.1 may require you to restart the server.","pos":[8934,9028]},{"content":"Notice that clicking OK in the in the <bpt id=\"p1\">**</bpt>Microsoft Advanced Threat Analytics Center Setup<ept id=\"p1\">**</ept> dialog will automatically restart the server.","pos":[9029,9165],"source":" Notice that clicking OK in the in the **Microsoft Advanced Threat Analytics Center Setup** dialog will automatically restart the server."},{"content":"This is especially important when installing the ATA Lightweight Gateway on a domain controller, as you may want to plan a maintenance window before the installation.","pos":[9166,9332]},{"content":".Net Framework restart","pos":[9339,9361]},{"pos":[9405,9453],"content":"Historical network activities no longer migrated","linkify":"Historical network activities no longer migrated","nodes":[{"content":"Historical network activities no longer migrated","pos":[0,48]}]},{"content":"This version of ATA delivers an improved detection engine, which provides more accurate detection and reduces many false positive scenarios, especially for Pass-the-Hash.","pos":[9454,9624]},{"content":"The new and improved detection engine utilizes inline detection technology enabling detection without accessing historical network activity, to significantly increase the performance of the ATA Center.","pos":[9625,9826],"source":"\nThe new and improved detection engine utilizes inline detection technology enabling detection without accessing historical network activity, to significantly increase the performance of the ATA Center."},{"content":"This also means that it is unnecessary to migrate historical network activity during the update procedure.","pos":[9827,9933]},{"content":"The ATA update procedure exports the data, in case you want it for future investigation, to <ph id=\"ph1\">`&lt;Center Installation Path&gt;\\Migration`</ph> as a JSON file.","pos":[9934,10080],"source":"\nThe ATA update procedure exports the data, in case you want it for future investigation, to `<Center Installation Path>\\Migration` as a JSON file."},{"pos":[10085,10093],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"Check out the ATA forum!","pos":[10095,10119]},{"content":"Update ATA to version 1.6 - migration guide","pos":[10193,10236]}],"content":"---\n# required metadata\n\ntitle: What's new in ATA version 1.6 | Microsoft ATA\ndescription: Lists what was new in ATA version 1.6 along with known issues\nkeywords:\nauthor: rkarlin\nmanager: mbaldwin\nms.date: 04/28/2016\nms.topic: article\nms.prod:\nms.service: advanced-threat-analytics\nms.technology:\nms.assetid: a0d64aff-ca9e-4300-b3f8-eb3c8b8ae045\n\n# optional metadata\n\n#ROBOTS:\n#audience:\n#ms.devlang:\nms.reviewer: bennyl\nms.suite: ems\n#ms.tgt_pltfrm:\n#ms.custom:\n\n---\n\n# What's new in ATA version 1.6\nThese release notes provide information about known issues in this version of  Advanced Threat Analytics.\n\n## What's new in the ATA 1.6 update?\nThe update to ATA 1.6 provides improvements in the following areas:\n\n-   New detections\n\n-   Improvements to existing detections\n\n-   The ATA Lightweight Gateway\n\n-   Automatic updates\n\n-   Improved ATA Center performance\n\n-   Lower storage requirements\n\n-   Support for IBM QRadar\n\n### New detections\n\n\n- **Malicious Data Protection Private Information Request**\nData Protection API (DPAPI) is a password-based data protection service. This protection service is used by various applications that store user’s secrets, such as website passwords and file-share credentials. In order to support password-loss scenarios, users can decrypt protected data by using a recovery key which does not involve their password. In a domain environment, attackers can remotely steal the recovery key and use it to decrypt protected data on all domain joined computers.\n\n\n- **Net Session Enumeration**\nReconnaissance is a key stage within the advanced attack kill chain. Domain Controllers (DCs) function as file servers for the purpose of Group Policy Object distribution, using the Server Message Block (SMB) protocol. As part of the reconnaissance phase, attackers can query the DC for all active SMB sessions on the server, allowing them to gain access to all users and IP addresses associated with those SMB sessions. SMB session enumeration can be used by attackers for targeting sensitive accounts, helping them move laterally across the network.\n\n\n- **Malicious replication requests**\nIn Active Directory environments, replication happens regularly between Domain Controllers. An attacker can spoof an Active Directory replication request (sometimes impersonating a Domain Controller) allowing the attacker to retrieve the data stored in Active Directory, including password hashes, without utilizing more intrusive techniques like Volume Shadow Copy.\n\n\n- **Detection of MS11-013 vulnerability**\nThere is an elevation of privilege vulnerability in Kerberos which allows for certain aspects of a Kerberos service ticket to be forged. A malicious user or attacker who successfully exploits this vulnerability can obtain a token with elevated privileges on the Domain Controller.\n\n\n- **Unusual protocol implementation**\nAuthentication requests (Kerberos or NTLM) are usually performed using a standard set of methods and protocols. However, in order to successfully authenticate, the request must meet only a specific set of requirements. Attackers might implement these protocols with minor deviations from the standard implementation in the environment. These deviations might indicate the presence of an attacker attempting to execute attacks such as Pass-The-Hash, Brute Force and others.\n\n\n### Improvements to existing detections\nATA 1.6 includes improved detection logic that reduces false-positive and false-negative scenarios for existing detections such as Golden Ticket, Honey Token, Brute Force and Remote Execution.\n\n### The ATA Lightweight Gateway\nThis version of ATA introduces a new deployment option for the ATA Gateway, which allows an ATA Gateway to be installed directly on the Domain Controller. This deployment option removes non-critical functionality of the ATA Gateway and introduces dynamic resource management based on available resources on the DC, which makes sure the existing operations of the DC are not affected. The ATA Lightweight Gateway reduces the cost of ATA deployment. At the same time it makes deployment easier in branch sites, in which there is limited hardware resource capacity or inability to set up port-mirroring support.\nFor more information about the ATA Lightweight Gateway, see [ATA architecture](/advanced-threat-analytics/plan-design/ata-architecture#ata-gateway-and-ata-lightweight-gateway)\n\nFor more information about deployment considerations and choosing the right type of gateways for you, see [ATA capacity planning](/advanced-threat-analytics/plan-design/ata-capacity-planning#choosing-the-right-gateway-type-for-your-deployment)\n\n\n### Automatic updates\nStarting with version 1.6, it is possible to update the ATA Center using Microsoft Update. In addition, the ATA Gateways can now be automatically updated using their standard communication channel to the ATA Center.\n### Improved ATA Center performance\nWith this version, a lighter database load and a more efficient way of running all detection enables many more domain controllers to be monitored with a single ATA Center.\n\n### Lower storage requirements\nATA 1.6 necessitates ignificantly less storage space to run the ATA Database, now requiring only 20% of the storage space used in previous versions.\n\n### Support for IBM QRadar\nATA now can now receive events from IBM's QRadar SIEM solution, in addition to the previously supported SIEM solutions.\n\n## Known issues\nThe following known issues exist in this version.\n\n### Failure to recognize new path in manually moved databases\n\nIn deployments in which the database path is manually moved, ATA deployment does not use the new database path for the update. This may cause the following issues:\n\n\n- ATA may use all the free space in the system drive of the ATA Center, without circularly deleting old network activities.\n\n\n- Updating ATA to version 1.6 may fail the pre-update Readiness Checks, as shown in the image below.\n    ![Failed readiness check](media/ata_failed_readinesschecks.png)\n    >[!Important]\nBefore updating ATA to version 1.6, update the following registry key with the correct database path:  `HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Microsoft Advanced Threat Analytics\\Center\\DatabaseDataPath`\n\n### Migration failure when updating from ATA 1.5\nWhen updating to ATA 1.6, the update process may fail with the following error code:\n\n![Update ATA to 1.6 error](http://i.imgur.com/QrLSApr.png)\nIf you see this error, review the deployment log in: **C:\\Users\\<User>\\AppData\\Local\\Temp**, and look for the following exception:\n\n    System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> MongoDB.Driver.MongoWriteException: A write operation resulted in an error. E11000 duplicate key error index: ATA.UniqueEntityProfile.$_id_ dup key: { : \"<guid>\" } ---> MongoDB.Driver.MongoBulkWriteException`1: A bulk write operation resulted in one or more errors.  E11000 duplicate key error index: ATA.UniqueEntityProfile.$_id_ dup key: { : \" <guid> \" }\n\nYou may also see this error: \n    System.ArgumentNullException: Value cannot be null.\n    \nIf you see either of these errors, run the following workaround.\n\n**Workaround**: \n\n1.  Move the folder \"data_old\" to a temporary folder (usually located in %ProgramFiles%\\Microsoft Advanced Threat Analytics\\Center\\MongoDB\\bin).\n2.  Uninstall the ATA Center v1.5, and delete all database data.\n![Uninstall ATA 1.5](http://i.imgur.com/x4nJycx.png)\n3.  Re-install ATA Center v1.5. Make sure to use the same configuration as the previous ATA 1.5 installation (Certificates, IP addresses, DB path, etc.).\n4.  Stop these services in the following order:\n    1.  Microsoft Advanced Threat Analytics Center\n    2.  MongoDB\n5.  Replace the MongoDB database files with the files in the “data_old” folder.\n6.  Start these services in the following order:\n    1.  MongoDB\n    2.  Microsoft Advanced Threat Analytics Center\n7.  Review the logs to verify that the product is running without errors.\n8.  [Download](http://aka.ms/ataremoveduplicateprofiles \"Download\") the \"RemoveDuplicateProfiles.exe\" tool and copy it to the main installation path (%ProgramFiles%\\Microsoft Advanced Threat Analytics\\Center)\n9.  From an elevated command prompt, run “RemoveDuplicateProfiles.exe” and wait until it completes successfully.\n10. From here:  …\\Microsoft Advanced Threat Analytics\\Center\\MongoDB\\bin directory: **Mongo ATA**, type the following command:\n\n    db.SuspiciousActivities.remove({ \"_t\" : \"RemoteExecutionSuspiciousActivity\", \"DetailsRecords\" : { \"$elemMatch\" : { \"ReturnCode\" : null } } }, { \"_id\" : 1 });\n\n![Update workaround](http://i.imgur.com/Nj99X2f.png)\n\nThis should return a WriteResult({ \"nRemoved\" : XX }) where “XX” is the number of Suspicious Activities that were deleted. If the number is greater than 0, exit the command prompt, and continue with the update process.\n\n\n### Net Framework 4.6.1 requires restarting the server\n\nIn some cases, the installation of .Net Framework 4.6.1 may require you to restart the server. Notice that clicking OK in the in the **Microsoft Advanced Threat Analytics Center Setup** dialog will automatically restart the server. This is especially important when installing the ATA Lightweight Gateway on a domain controller, as you may want to plan a maintenance window before the installation.\n    ![.Net Framework restart](media/ata-net-framework-restart.png)\n\n### Historical network activities no longer migrated\nThis version of ATA delivers an improved detection engine, which provides more accurate detection and reduces many false positive scenarios, especially for Pass-the-Hash.\nThe new and improved detection engine utilizes inline detection technology enabling detection without accessing historical network activity, to significantly increase the performance of the ATA Center. This also means that it is unnecessary to migrate historical network activity during the update procedure.\nThe ATA update procedure exports the data, in case you want it for future investigation, to `<Center Installation Path>\\Migration` as a JSON file.\n\n## See Also\n[Check out the ATA forum!](https://social.technet.microsoft.com/Forums/security/home?forum=mata)\n\n[Update ATA to version 1.6 - migration guide](ata-update-1.6-migration-guide.md)"}