{"nodes":[{"pos":[11,55],"content":"PackageManagement (aka. OneGet) Improvements","needQuote":true,"nodes":[{"content":"PackageManagement (aka. OneGet) Improvements","pos":[0,44],"nodes":[{"content":"PackageManagement (aka.","pos":[0,23]},{"content":"OneGet) Improvements","pos":[24,44]}]}]},{"content":"Note: provide a proposed descriptive title and a brief description","pos":[97,163]},{"content":"PackageManagement (aka.","pos":[168,191]},{"content":"OneGet) Improvements","pos":[192,212]},{"content":"The following are the fixes made in the WMF 5.1 to address some of the user experience gaps in the WMF 5.0 release.","pos":[216,331]},{"pos":[334,353],"content":"1 <bpt id=\"p1\">**</bpt>Version Alias<ept id=\"p1\">**</ept>","source":"1 **Version Alias**"},{"content":"<bpt id=\"p1\">**</bpt>Scenario<ept id=\"p1\">**</ept>: Assuming you have version 1.0 and 2.0 of a package, P1, installed on your system, and now you want to uninstall version 1.0, so you run \"uninstall-package -name P1 -version 1.0\".","pos":[355,547],"source":"**Scenario**: Assuming you have version 1.0 and 2.0 of a package, P1, installed on your system, and now you want to uninstall version 1.0, so you run \"uninstall-package -name P1 -version 1.0\"."},{"content":"You expect version 1.0 to be uninstalled after running the cmdlet.","pos":[548,614]},{"content":"However the result is that version 2.0 gets uninstalled.","pos":[615,671]},{"content":"The cause of the issue is that the \"-version\" parameter is an alias of the \"-minimumversion\" parameter.","pos":[678,781]},{"content":"When OneGet is looking for a qualitied package with the minimum version of 1.0, it returns the latest version.","pos":[782,892]},{"content":"This behavior is expected under normal cases because finding the latest version is what most people want.","pos":[893,998]},{"content":"However, it should not apply to the uninstall-package case.","pos":[999,1058]},{"pos":[1064,1137],"content":"<bpt id=\"p1\">**</bpt>Solution<ept id=\"p1\">**</ept>:removed -version alias entirely in OneGet and PowerShellGet.","source":"**Solution**:removed -version alias entirely in OneGet and PowerShellGet."},{"pos":[1140,1195],"content":"2 <bpt id=\"p1\">**</bpt>Multiple Prompts for Bootstrapping NuGet Provider<ept id=\"p1\">**</ept>","source":"2 **Multiple Prompts for Bootstrapping NuGet Provider**"},{"content":"<bpt id=\"p1\">**</bpt>Scenario<ept id=\"p1\">**</ept>: When you run Find-Module or install-module or other OneGet cmdlets on your machine for the first time, OneGet is trying to bootstrap the NuGet provider.","pos":[1197,1363],"source":"**Scenario**: When you run Find-Module or install-module or other OneGet cmdlets on your machine for the first time, OneGet is trying to bootstrap the NuGet provider."},{"content":"That's because the PowershellGet provider also uses the NuGet provider to download PowerShell modules.","pos":[1364,1466]},{"content":"OneGet then prompts the user for permission to install the NuGet provider.","pos":[1467,1541]},{"content":"After the user selects \"yes\" for the bootstrapping, the latest version of the NuGet provider will be installed.","pos":[1542,1653]},{"content":"However there is a case when you have an old version of NuGet provider installed on your machine, the older version of NuGet sometimes gets loaded first into the PowerShell session(that's the race condition in OneGet).","pos":[1660,1878]},{"content":"However PowerShellGet requires the later version of Nuget provider to work, so PowerShellGet asks the OneGet for bootstrapping the NuGet provider again.","pos":[1879,2031]},{"content":"That's why you see the mulitple prompts for bootstrapping the NuGet provider.","pos":[2032,2109]},{"pos":[2111,2246],"content":"<bpt id=\"p1\">**</bpt>Solution<ept id=\"p1\">**</ept>: OneGet now loads the latest version of the NuGet provider to avoid multiple prompts for bootstrapping the NuGet provider.","source":"**Solution**: OneGet now loads the latest version of the NuGet provider to avoid multiple prompts for bootstrapping the NuGet provider."},{"pos":[2248,2477],"content":"A workaround also exists, i.e. manually delete the old version of the NuGet provider (NuGet-Anycpu.exe) if exists from $env:ProgramFiles\\PackageManagement\\ProviderAssemblies $env:LOCALAPPDATA\\PackageManagement\\ProviderAssemblies","source":"A workaround also exists, i.e. manually delete the old version of the NuGet provider (NuGet-Anycpu.exe) if exists from $env:ProgramFiles\\PackageManagement\\ProviderAssemblies \n$env:LOCALAPPDATA\\PackageManagement\\ProviderAssemblies"},{"pos":[2480,2512],"content":"3 <bpt id=\"p1\">**</bpt>Machine with Intranet only<ept id=\"p1\">**</ept>","source":"3 **Machine with Intranet only**"},{"content":"<bpt id=\"p1\">**</bpt>Scenario<ept id=\"p1\">**</ept>: For the enterprise scenario, people are working under an environment where there is no internet access but Intranet only.","pos":[2514,2649],"source":"**Scenario**: For the enterprise scenario, people are working under an environment where there is no internet access but Intranet only."},{"content":"OneGet did not support this case in WMF 5.0.","pos":[2650,2694]},{"pos":[2696,2709],"content":"<bpt id=\"p1\">**</bpt>Solution<ept id=\"p1\">**</ept>:","source":"**Solution**:"},{"content":"You can download the NuGet provider on another machine with Internet connection by using the command \"Install-PackageProvider -Name NuGet\".","pos":[2712,2851]},{"content":"Find the NuGet provider you just installed under either  $env:ProgramFiles\\PackageManagement\\ProviderAssemblies\\nuget  or  $env:LOCALAPPDATA\\PackageManagement\\ProviderAssemblies\\nuget.","pos":[2855,3039]},{"pos":[3044,3255],"content":"Copy the binaries over to a folder or network share location that your machine (the one without Internet) have access too and install NuGet provider with \"Install-PackageProvider NuGet -Source <ph id=\"ph1\">&lt;Path to folder&gt;</ph>\".","source":"Copy the binaries over to a folder or network share location that your machine (the one without Internet) have access too and install NuGet provider with \"Install-PackageProvider NuGet -Source <Path to folder>\"."},{"pos":[3258,3273],"content":"4 <bpt id=\"p1\">**</bpt>Event log<ept id=\"p1\">**</ept>","source":"4 **Event log**"},{"content":"When you install packages, you are changing the state of your machine.","pos":[3275,3345]},{"content":"For diagnosis purpose, OneGet now logs events to the Windows event log for install, uninstall, and save-package.","pos":[3346,3458]},{"content":"The Event channel is the same as PowerShell, that is, Microsoft-Windows-PowerShell, Operational.","pos":[3459,3555]},{"content":"5 <bpt id=\"p1\">**</bpt>Authentication Support<ept id=\"p1\">**</ept> OneGet now supports finding and installing packages from a repository that requires basic authentication.","pos":[3557,3691],"source":"5 **Authentication Support**\nOneGet now supports finding and installing packages from a repository that requires basic authentication."},{"content":"You can supply your credential to the Find-Package and Install-Package cmdlet.","pos":[3692,3770]},{"content":"For example:","pos":[3771,3783]},{"pos":[3876,3909],"content":"6 <bpt id=\"p1\">**</bpt>Using OneGet Behind a Proxy<ept id=\"p1\">**</ept>","source":"6 **Using OneGet Behind a Proxy**"},{"content":"OneGet now takes proxy parameters: -ProxyCredential and -Proxy.","pos":[3911,3974]},{"content":"Using these parameters, you can specify proxy url and proxy credential to OneGet cmdlets (by default, we use the system proxy settings).","pos":[3975,4111]},{"content":"For example:","pos":[4112,4124]}],"content":"---\ntitle: PackageManagement (aka. OneGet) Improvements\ncontributor:  jianyunt, quoctruong\n---\n\n>Note: provide a proposed descriptive title and a brief description\n\n## PackageManagement (aka. OneGet) Improvements ##\nThe following are the fixes made in the WMF 5.1 to address some of the user experience gaps in the WMF 5.0 release. \n\n1 **Version Alias**\n\n**Scenario**: Assuming you have version 1.0 and 2.0 of a package, P1, installed on your system, and now you want to uninstall version 1.0, so you run \"uninstall-package -name P1 -version 1.0\". You expect version 1.0 to be uninstalled after running the cmdlet. However the result is that version 2.0 gets uninstalled. \n    \nThe cause of the issue is that the \"-version\" parameter is an alias of the \"-minimumversion\" parameter. When OneGet is looking for a qualitied package with the minimum version of 1.0, it returns the latest version. This behavior is expected under normal cases because finding the latest version is what most people want. However, it should not apply to the uninstall-package case.\n    \n**Solution**:removed -version alias entirely in OneGet and PowerShellGet. \n\n2 **Multiple Prompts for Bootstrapping NuGet Provider**\n\n**Scenario**: When you run Find-Module or install-module or other OneGet cmdlets on your machine for the first time, OneGet is trying to bootstrap the NuGet provider. That's because the PowershellGet provider also uses the NuGet provider to download PowerShell modules. OneGet then prompts the user for permission to install the NuGet provider. After the user selects \"yes\" for the bootstrapping, the latest version of the NuGet provider will be installed. \n    \nHowever there is a case when you have an old version of NuGet provider installed on your machine, the older version of NuGet sometimes gets loaded first into the PowerShell session(that's the race condition in OneGet). However PowerShellGet requires the later version of Nuget provider to work, so PowerShellGet asks the OneGet for bootstrapping the NuGet provider again. That's why you see the mulitple prompts for bootstrapping the NuGet provider.\n\n**Solution**: OneGet now loads the latest version of the NuGet provider to avoid multiple prompts for bootstrapping the NuGet provider.\n\nA workaround also exists, i.e. manually delete the old version of the NuGet provider (NuGet-Anycpu.exe) if exists from $env:ProgramFiles\\PackageManagement\\ProviderAssemblies \n$env:LOCALAPPDATA\\PackageManagement\\ProviderAssemblies\n\n\n3 **Machine with Intranet only**\n\n**Scenario**: For the enterprise scenario, people are working under an environment where there is no internet access but Intranet only. OneGet did not support this case in WMF 5.0.\n\n**Solution**:\n- You can download the NuGet provider on another machine with Internet connection by using the command \"Install-PackageProvider -Name NuGet\".\n\n- Find the NuGet provider you just installed under either  $env:ProgramFiles\\PackageManagement\\ProviderAssemblies\\nuget  or  $env:LOCALAPPDATA\\PackageManagement\\ProviderAssemblies\\nuget. \n\n- Copy the binaries over to a folder or network share location that your machine (the one without Internet) have access too and install NuGet provider with \"Install-PackageProvider NuGet -Source <Path to folder>\".\n\n\n4 **Event log**\n\nWhen you install packages, you are changing the state of your machine. For diagnosis purpose, OneGet now logs events to the Windows event log for install, uninstall, and save-package. The Event channel is the same as PowerShell, that is, Microsoft-Windows-PowerShell, Operational.\n\n5 **Authentication Support**\nOneGet now supports finding and installing packages from a repository that requires basic authentication. You can supply your credential to the Find-Package and Install-Package cmdlet. For example:\n``` PowerShell\nFind-Package -Source <SourceWithCredential> -Credential (Get-Credential)\n```\n6 **Using OneGet Behind a Proxy**\n\nOneGet now takes proxy parameters: -ProxyCredential and -Proxy. Using these parameters, you can specify proxy url and proxy credential to OneGet cmdlets (by default, we use the system proxy settings). For example:\n``` PowerShell\nFind-Package -Source http://www.nuget.org/api/v2/ -Proxy http://www.myproxyserver.com -ProxyCredential (Get-Credential)\n```\n"}