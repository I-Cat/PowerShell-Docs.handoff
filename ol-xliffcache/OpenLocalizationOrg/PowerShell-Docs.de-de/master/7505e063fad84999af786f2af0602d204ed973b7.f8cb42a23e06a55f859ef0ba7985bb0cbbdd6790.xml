{"nodes":[{"pos":[11,60],"content":"PsDscRunAsCredential with DSC Composite Resources","needQuote":true,"nodes":[{"content":"PsDscRunAsCredential with DSC Composite Resources","pos":[0,49]}]},{"content":"Using PsDscRunAsCredential with DSC Composite Resources","pos":[98,153]},{"pos":[158,380],"content":"We have added a support to use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">*</bpt>PsDscRunAsCredential<ept id=\"p2\">*</ept><ept id=\"p1\">](https://msdn.microsoft.com/cs-cz/powershell/dsc/runasuser)</ept> with DSC <bpt id=\"p3\">[</bpt>Composite<ept id=\"p3\">](https://msdn.microsoft.com/en-us/powershell/dsc/authoringresourcecomposite)</ept> resources.","source":"We have added a support to use [*PsDscRunAsCredential*](https://msdn.microsoft.com/cs-cz/powershell/dsc/runasuser) with DSC [Composite](https://msdn.microsoft.com/en-us/powershell/dsc/authoringresourcecomposite) resources."},{"content":"User can now specify value for PsDscRunAsCredential when using composite resources inside configurations.","pos":[386,491]},{"content":"If it is specified, we run all resources inside composite resource as RunAs user.","pos":[492,573]},{"content":"If composite resource calls another composite resource, it’s all resources are executed as RunAs user as well.","pos":[574,684]},{"content":"RunAs credentials are propagated to any level of composite resource hierarchy.","pos":[686,764]},{"content":"If any resource inside composite resource specify its own value for PsDscRunAsCredential we give merge error during configuration compilation.","pos":[765,907]},{"pos":[909,1088],"content":"Here is how to use it with <bpt id=\"p1\">[</bpt>WindowsFeatureSet<ept id=\"p1\">](https://msdn.microsoft.com/en-us/powershell/wmf/dsc_newresources)</ept> Composite resource included in PSDesiredStateConfiguration module.","source":"Here is how to use it with [WindowsFeatureSet](https://msdn.microsoft.com/en-us/powershell/wmf/dsc_newresources) Composite resource included in PSDesiredStateConfiguration module."}],"content":"---\ntitle: PsDscRunAsCredential with DSC Composite Resources\nauthor:  jaimeo\ncontributor: ?\n---\n# Using PsDscRunAsCredential with DSC Composite Resources   \n\nWe have added a support to use [*PsDscRunAsCredential*](https://msdn.microsoft.com/cs-cz/powershell/dsc/runasuser) with DSC [Composite](https://msdn.microsoft.com/en-us/powershell/dsc/authoringresourcecomposite) resources.    \n\nUser can now specify value for PsDscRunAsCredential when using composite resources inside configurations. If it is specified, we run all resources inside composite resource as RunAs user. If composite resource calls another composite resource, it’s all resources are executed as RunAs user as well.  RunAs credentials are propagated to any level of composite resource hierarchy. If any resource inside composite resource specify its own value for PsDscRunAsCredential we give merge error during configuration compilation.\n\nHere is how to use it with [WindowsFeatureSet](https://msdn.microsoft.com/en-us/powershell/wmf/dsc_newresources) Composite resource included in PSDesiredStateConfiguration module. \n\n\n\n```powershell\n\nConfiguration InstallWindowsFeature     \n{\n    Import-DscResource -ModuleName PSDesiredStateConfiguration\n\n    Node $AllNodes.NodeName\n    {\n        WindowsFeatureSet features \n        {  \n            Name = @(\"Telnet-Client\",\"SNMP-Service\")  \n            Ensure = \"Present\"  \n            IncludeAllSubFeature = $true  \n            PsDscRunAsCredential = Get-Credential   \n        }  \n    }\n\n}\n\n$configData = @{\n    AllNodes = @(\n        @{\n            NodeName             = 'localhost';\n            PSDscAllowDomainUser = $true\n            CertificateFile      = 'C:\\publicKeys\\targetNode.cer'\n            Thumbprint           = '7ee7f09d-4be0-41aa-a47f-96b9e3bdec25'\n        }\n    )\n}\n\n\nInstallWindowsFeature -ConfigurationData $configData \n\n```"}