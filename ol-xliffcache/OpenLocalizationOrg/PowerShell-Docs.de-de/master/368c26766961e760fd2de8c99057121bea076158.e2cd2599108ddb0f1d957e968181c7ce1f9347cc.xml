{"nodes":[{"pos":[11,55],"content":"Pull Partial Configuration Naming Convention","needQuote":true,"nodes":[{"content":"Pull Partial Configuration Naming Convention","pos":[0,44]}]},{"content":"Pull Partial Configuration Naming Convention","pos":[103,147]},{"content":"In the previous releases, the naming convention for a partial configuration was the mof file name in the pull server /service should match the partial configuration name specified in the local configuration manger settings that in turn has to match the configuration name embedded in the MOF file.","pos":[148,445]},{"content":"See the snapshots below:- •   Local configuration settings which defines a partial configuration that a node is allowed to receive.","pos":[446,578],"source":" \nSee the snapshots below:-\n•   Local configuration settings which defines a partial configuration that a node is allowed to receive."},{"content":"Sample metaconfiguration","pos":[582,606]},{"content":"•   Sample partial configuration definition","pos":[648,691]},{"content":"•   ‘ConfigurationName’ embedded in the generated MOF file.","pos":[941,1000]},{"content":"Sample generated mof file","pos":[1004,1029]},{"content":"•   FileName in the pull configuration repository","pos":[1070,1119]},{"content":"FileName in Configuration Repository","pos":[1124,1160]},{"content":"Azure Automation service name generated mof files as <ph id=\"ph1\">``&lt;ConfigurationName&gt;.&lt;NodeName&gt;.mof``</ph>.","pos":[1207,1299],"source":"Azure Automation service name generated mof files as ``<ConfigurationName>.<NodeName>.mof``."},{"content":"So the configuration below will compile to PartialOne.Localhost.mof.","pos":[1300,1368]},{"content":"This made it impossible to pull a partial configuration from Azure automation service.","pos":[1371,1457]},{"content":"In WMF 5.1, partial configuration in the pull server/service can be named as <ph id=\"ph1\">``&lt;ConfigurationName&gt;.&lt;NodeName&gt;.mof``</ph>.","pos":[1706,1822],"source":"In WMF 5.1, partial configuration in the pull server/service can be named as ``<ConfigurationName>.<NodeName>.mof``."},{"content":"Moreover, if a machine is pulling a single configuration from a pull server/service then the configuration document on the pull server configuration repository can have any name.","pos":[1823,2001]},{"content":"This naming flexibility enables managing partial configuration of a node using both onprem and Azure Automation pull service.","pos":[2002,2127]},{"content":"For example, you can have 'base' partial configuration that gets pushed locally and another partial configuration that gets pulled from Azure Automation Service.","pos":[2128,2289]},{"content":"The metaconfiguration below will setup a node to be managed both locally as well as by Azure Automation Service.","pos":[2291,2403]}],"content":"---\ntitle: Pull Partial Configuration Naming Convention\nauthor:  jaimeo\ncontributor: berheabrha\n---\n\n##Pull Partial Configuration Naming Convention\nIn the previous releases, the naming convention for a partial configuration was the mof file name in the pull server /service should match the partial configuration name specified in the local configuration manger settings that in turn has to match the configuration name embedded in the MOF file. \nSee the snapshots below:-\n•   Local configuration settings which defines a partial configuration that a node is allowed to receive.\n\n![Sample metaconfiguration](../../images/MetaConfigPartialOne.png)\n\n•   Sample partial configuration definition \n\n```Powershell\nConfiguration PartialOne\n{\n    Node('localhost')\n    {\n        File test \n        {\n            DestinationPath = \"$env:TEMP\\partialconfigexample.txt\"\n            Contents = 'Partial Config Example'\n        }\n    }\n}\nPartialOne\n```\n\n•   ‘ConfigurationName’ embedded in the generated MOF file.\n\n![Sample generated mof file](../../images/PartialGeneratedMof.png)\n\n•   FileName in the pull configuration repository \n\n![FileName in Configuration Repository](../../images/PartialInConfigRepository.png)\n\nAzure Automation service name generated mof files as ``<ConfigurationName>.<NodeName>.mof``. So the configuration below will compile to PartialOne.Localhost.mof.  \nThis made it impossible to pull a partial configuration from Azure automation service.\n\n```Powershell\nConfiguration PartialOne\n{\n    Node('localhost')\n    {\n        File test \n        {\n            DestinationPath = \"$env:TEMP\\partialconfigexample.txt\"\n            Contents = 'Partial Config Example'\n        }\n    }\n}\nPartialOne\n```\n\nIn WMF 5.1, partial configuration in the pull server/service can be named as ``<ConfigurationName>.<NodeName>.mof``. Moreover, if a machine is pulling a single configuration from a pull server/service then the configuration document on the pull server configuration repository can have any name. This naming flexibility enables managing partial configuration of a node using both onprem and Azure Automation pull service. For example, you can have 'base' partial configuration that gets pushed locally and another partial configuration that gets pulled from Azure Automation Service.\n\nThe metaconfiguration below will setup a node to be managed both locally as well as by Azure Automation Service.\n\n```Powershell\n  [DscLocalConfigurationManager()]\n   Configuration RegistrationMetaConfig\n   {\n        Settings\n        {\n            RefreshFrequencyMins = 30;\n            RefreshMode = \"PULL\";            \n        }\n\n        ConfigurationRepositoryWeb web\n        {\n            ServerURL =  $endPoint\n            RegistrationKey = $registrationKey\n            ConfigurationNames = $configurationName\n        }\n\n        # Partial configuration managed by Azure Automation Service.\n        PartialConfiguration PartialCOnfigurationManagedByAzureAutomation\n        {\n            ConfigurationSource = \"[ConfigurationRepositoryWeb]Web\"   \n        }\n    \n        # This partial configuration is managed locally.\n        PartialConfiguration OnPremConfig\n        {\n            RefreshMode = \"PUSH\"\n            ExclusiveResources = @(\"Script\")\n        }\n\n   }\n\n   RegistrationMetaConfig\n   slcm -Path .\\RegistrationMetaConfig -Verbose\n ```\n\n\n"}