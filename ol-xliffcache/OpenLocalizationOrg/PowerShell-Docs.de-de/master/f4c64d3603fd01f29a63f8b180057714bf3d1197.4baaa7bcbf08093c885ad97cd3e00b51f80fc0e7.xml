{"nodes":[{"pos":[13,47],"content":"Specifying cross-node dependencies","needQuote":true,"nodes":[{"content":"Specifying cross-node dependencies","pos":[0,34]}]},{"pos":[80,94],"content":"powershell,DSC","needQuote":true,"nodes":[{"content":"powershell,DSC","pos":[0,14]}]},{"content":"Specifying cross-node dependencies","pos":[192,226]},{"content":"Applies To: Windows PowerShell 5.0","pos":[230,264]},{"content":"DSC provides special resources, <bpt id=\"p1\">**</bpt>WaitForAll<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>WaitForAny<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>WaitForSome<ept id=\"p3\">**</ept> that can be used in configurations to specify dependencies on configurations on other nodes.","pos":[266,442],"source":"DSC provides special resources, **WaitForAll**, **WaitForAny**, and **WaitForSome** that can be used in configurations to specify dependencies on configurations on other nodes."},{"content":"The behavior of these resources is as follows:","pos":[443,489],"source":" The\nbehavior of these resources is as follows:"},{"pos":[493,625],"content":"<bpt id=\"p1\">**</bpt>WaitForAll<ept id=\"p1\">**</ept>: Succeeds if the specified resource is in the desired state on all target nodes defined in the <bpt id=\"p2\">**</bpt>NodeName<ept id=\"p2\">**</ept> property.","source":"**WaitForAll**: Succeeds if the specified resource is in the desired state on all target nodes defined in the **NodeName** property."},{"pos":[628,776],"content":"<bpt id=\"p1\">**</bpt>WaitForAny<ept id=\"p1\">**</ept>: Succeeds if the specified resource is in the desired state on at least one of the target nodes defined in the <bpt id=\"p2\">**</bpt>NodeName<ept id=\"p2\">**</ept> property.","source":"**WaitForAny**: Succeeds if the specified resource is in the desired state on at least one of the target nodes defined in the **NodeName** property."},{"content":"<bpt id=\"p1\">**</bpt>WaitForSome<ept id=\"p1\">**</ept>: Specifies a <bpt id=\"p2\">**</bpt>NodeCount<ept id=\"p2\">**</ept> property in addition to a <bpt id=\"p3\">**</bpt>NodeName<ept id=\"p3\">**</ept> property.","pos":[779,870],"source":"**WaitForSome**: Specifies a **NodeCount** property in addition to a **NodeName** property."},{"content":"The resource succeeds if the resource is in the desired state on a minimum number of nodes (specified by <bpt id=\"p1\">**</bpt>NodeCount<ept id=\"p1\">**</ept>) defined by the <bpt id=\"p2\">**</bpt>NodeName<ept id=\"p2\">**</ept> property.","pos":[871,1029],"source":" The resource succeeds if the resource is in the desired state on a minimum number of nodes \n(specified by **NodeCount**) defined by the **NodeName** property."},{"content":"Using WaitForXXXX resources","pos":[1035,1062]},{"content":"To use the <bpt id=\"p1\">**</bpt>WaitForXXXX<ept id=\"p1\">**</ept> resources, you create a resource block of that resource type that specifies the DSC resource and node(s) to wait for.","pos":[1064,1208],"source":"To use the **WaitForXXXX** resources, you create a resource block of that resource type that specifies the DSC resource and node(s) to wait for."},{"content":"You then use the <bpt id=\"p1\">**</bpt>DependsOn<ept id=\"p1\">**</ept> property in any other resource blocks in your configuration to wait for the conditions specified in the <bpt id=\"p2\">**</bpt>WaitForXXXX<ept id=\"p2\">**</ept> node to succeed.","pos":[1209,1376],"source":" You then use the **DependsOn** property\nin any other resource blocks in your configuration to wait for the conditions specified in the **WaitForXXXX** node to succeed."},{"pos":[1378,1615],"content":"For example, in the following configuration, the target node is waiting for the <bpt id=\"p1\">**</bpt>xADDomain<ept id=\"p1\">**</ept> resource to finish on the <bpt id=\"p2\">**</bpt>MyDC<ept id=\"p2\">**</ept> node with maximum number of 30 retries, at 15-second intervals, before the target node can join the domain.","source":"For example, in the following configuration, the target node is waiting for the **xADDomain** resource to finish on the **MyDC** node with maximum number of 30 retries, at 15-second intervals, before the target node \ncan join the domain."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> By default the WaitForXXX resources try one time and then fail.","pos":[2196,2269],"source":"**Note:** By default the WaitForXXX resources try one time and then fail."},{"content":"Although it is not required, you will typically want to specify a retry interval and count.","pos":[2270,2361]},{"content":"See Also","pos":[2366,2374]},{"pos":[2377,2416],"content":"<bpt id=\"p1\">[</bpt>DSC Configurations<ept id=\"p1\">](configurations.md)</ept>","source":"[DSC Configurations](configurations.md)"},{"pos":[2419,2448],"content":"<bpt id=\"p1\">[</bpt>DSC Resources<ept id=\"p1\">](resources.md)</ept>","source":"[DSC Resources](resources.md)"},{"pos":[2451,2511],"content":"<bpt id=\"p1\">[</bpt>Configuring The Local Configuration Manager<ept id=\"p1\">](metaConfig.md)</ept>","source":"[Configuring The Local Configuration Manager](metaConfig.md)"}],"content":"---\ntitle:   Specifying cross-node dependencies\nms.date:  2016-05-16\nkeywords:  powershell,DSC\ndescription:  \nms.topic:  article\nauthor:  eslesar\nmanager:  dongill\nms.prod:  powershell\n---\n\n# Specifying cross-node dependencies\n\n> Applies To: Windows PowerShell 5.0\n\nDSC provides special resources, **WaitForAll**, **WaitForAny**, and **WaitForSome** that can be used in configurations to specify dependencies on configurations on other nodes. The\nbehavior of these resources is as follows:\n\n* **WaitForAll**: Succeeds if the specified resource is in the desired state on all target nodes defined in the **NodeName** property.\n* **WaitForAny**: Succeeds if the specified resource is in the desired state on at least one of the target nodes defined in the **NodeName** property.\n* **WaitForSome**: Specifies a **NodeCount** property in addition to a **NodeName** property. The resource succeeds if the resource is in the desired state on a minimum number of nodes \n(specified by **NodeCount**) defined by the **NodeName** property. \n\n## Using WaitForXXXX resources\n\nTo use the **WaitForXXXX** resources, you create a resource block of that resource type that specifies the DSC resource and node(s) to wait for. You then use the **DependsOn** property\nin any other resource blocks in your configuration to wait for the conditions specified in the **WaitForXXXX** node to succeed.\n\nFor example, in the following configuration, the target node is waiting for the **xADDomain** resource to finish on the **MyDC** node with maximum number of 30 retries, at 15-second intervals, before the target node \ncan join the domain.\n\n```PowerShell\nConfiguration JoinDomain\n\n{\n    Import-DscResource -Module xComputerManagement\n\n    Node myDomainJoinedServer\n    {\n\n        WaitForAll DC\n        {\n            ResourceName      = '[xADDomain]NewDomain'\n            NodeName          = 'MyDC'\n            RetryIntervalSec  = 15\n            RetryCount        = 30\n        }\n\n        xComputer JoinDomain\n        {\n            Name             = 'MyPC'\n            DomainName       = 'Contoso.com'\n            Credential       = (Get-Credential)\n            DependsOn        ='[WaitForAll]DC'\n        }\n    }\n}\n```\n\n>**Note:** By default the WaitForXXX resources try one time and then fail. Although it is not required, you will typically want to specify a retry interval and count.\n\n## See Also\n* [DSC Configurations](configurations.md)\n* [DSC Resources](resources.md)\n* [Configuring The Local Configuration Manager](metaConfig.md)\n\n"}