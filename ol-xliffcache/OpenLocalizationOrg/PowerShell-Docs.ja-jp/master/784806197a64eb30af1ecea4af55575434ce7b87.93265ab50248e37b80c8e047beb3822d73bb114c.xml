{"nodes":[{"pos":[105,126],"content":"powershell,cmdlet,jea","needQuote":true,"nodes":[{"content":"powershell,cmdlet,jea","pos":[0,21]}]},{"pos":[156,196],"content":"multi machine deployment and maintenance","needQuote":true,"nodes":[{"content":"multi machine deployment and maintenance","pos":[0,40]}]},{"content":"Multi-machine Deployment and Maintenance","pos":[231,271]},{"content":"At this point, you have deployed JEA to local systems several times.","pos":[272,340]},{"content":"Because your production environment probably consists of more than one machine, it's important to walk through the critical steps in the deployment process that must be repeated on each machine.","pos":[341,535],"source":"\nBecause your production environment probably consists of more than one machine, it's important to walk through the critical steps in the deployment process that must be repeated on each machine."},{"content":"High Level Steps:","pos":[540,557]},{"content":"Copy your modules (with Role Capabilities) to each node.","pos":[562,618]},{"content":"Copy your session configuration files to each node.","pos":[623,674]},{"pos":[679,749],"content":"Run <ph id=\"ph1\">`Register-PSSessionConfiguration`</ph> with your session configuration.","source":"Run `Register-PSSessionConfiguration` with your session configuration."},{"content":"Keep a copy of your session configuration and toolkits in a secure location.","pos":[754,830]},{"content":"As you make modifications, it's good to have a \"single source of truth.\"","pos":[831,903],"source":"\nAs you make modifications, it's good to have a \"single source of truth.\""},{"content":"Example Script","pos":[908,922]},{"content":"Here's an example script for deployment.","pos":[923,963]},{"content":"To use it in your environment, you'll have to use the names/paths of real file shares and modules.","pos":[964,1062],"source":"\nTo use it in your environment, you'll have to use the names/paths of real file shares and modules."},{"content":"Modifying Capabilities","pos":[2756,2778]},{"content":"When dealing with many machines, it's important that modifications are rolled out in a consistent manner.","pos":[2779,2884]},{"content":"Once JEA has a DSC Resource, this will help ensure your environment is in sync.","pos":[2885,2964],"source":"\nOnce JEA has a DSC Resource, this will help ensure your environment is in sync."},{"content":"Until that time, we highly recommend you keep a master copy of your session configurations and re-deploy each time you make a modification.","pos":[2965,3104],"source":"\nUntil that time, we highly recommend you keep a master copy of your session configurations and re-deploy each time you make a modification."},{"content":"Removing Capabilities","pos":[3109,3130]},{"content":"To remove your JEA configuration from your systems, use the following command on each machine:","pos":[3131,3225]}],"content":"---\ndescription:  \nmanager:  dongill\nms.topic:  article\nauthor:  jpjofre\nms.prod:  powershell\nkeywords:  powershell,cmdlet,jea\nms.date:  2016-06-22\ntitle:  multi machine deployment and maintenance\nms.technology:  powershell\n---\n\n# Multi-machine Deployment and Maintenance\nAt this point, you have deployed JEA to local systems several times.\nBecause your production environment probably consists of more than one machine, it's important to walk through the critical steps in the deployment process that must be repeated on each machine.\n\n## High Level Steps:\n1.  Copy your modules (with Role Capabilities) to each node.\n2.  Copy your session configuration files to each node.\n3.  Run `Register-PSSessionConfiguration` with your session configuration.\n4.  Keep a copy of your session configuration and toolkits in a secure location.\nAs you make modifications, it's good to have a \"single source of truth.\"\n\n## Example Script\nHere's an example script for deployment.\nTo use it in your environment, you'll have to use the names/paths of real file shares and modules.\n```PowerShell\n# First, copy the session configuration and modules (containing role capability files) onto a file share you have access to.\nCopy-Item -Path 'C:\\Demo\\Demo.pssc' -Destination '\\\\FileShare\\JEA\\Demo.pssc'\nCopy-Item -Path 'C:\\Program Files\\WindowsPowerShell\\Modules\\SomeModule\\' -Recurse -Destination '\\\\FileShare\\JEA\\SomeModule'\n\n# Next, author a setup script (C:\\JEA\\Deploy.ps1) to run on each individual node\n    # Contents of C:\\JEA\\Deploy.ps1\n    New-Item -ItemType Directory -Path C:\\JEADeploy\n    Copy-Item -Path '\\\\FileShare\\JEA\\Demo.pssc' -Destination 'C:\\JEADeploy\\'\n    Copy-Item -Path '\\\\FileShare\\JEA\\SomeModule' -Recurse -Destination 'C:\\Program Files\\WindowsPowerShell\\Modules' # Remember, Role Capability Files are found in modules\n    if (Get-PSSessionConfiguration -Name JEADemo -ErrorAction SilentlyContinue)\n    {\n        Unregister-PSSessionConfiguration -Name JEADemo -ErrorAction Stop\n    }\n\n    Register-PSSessionConfiguration -Name JEADemo -Path 'C:\\JEADeploy\\Demo.pssc'\n    Remove-Item -Path 'C:\\JEADeploy' # Don't forget to clean up!\n\n# Now, invoke the script on all of the target machines.\n# Note: this requires PowerShell Remoting be enabled on each machine. Enabling PowerShell remoting is a requirement to use JEA as well.\n# You may need to provide the \"-Credential\" parameter if your current user account does not have admin permissions on these machines.\nInvoke-Command â€“ComputerName 'Node1', 'Node2', 'Node3', 'NodeN' -FilePath 'C:\\JEA\\Deploy.ps1'\n\n# Finally, delete the session configuration and role capability files from the file share.\nRemove-Item -Path '\\\\FileShare\\JEA\\Demo.pssc'\nRemove-Item -Path '\\\\FileShare\\JEA\\SomeModule' -Recurse\n```\n## Modifying Capabilities\nWhen dealing with many machines, it's important that modifications are rolled out in a consistent manner.\nOnce JEA has a DSC Resource, this will help ensure your environment is in sync.\nUntil that time, we highly recommend you keep a master copy of your session configurations and re-deploy each time you make a modification.\n\n## Removing Capabilities\nTo remove your JEA configuration from your systems, use the following command on each machine:\n```PowerShell\nUnregister-PSSessionConfiguration -Name JEADemo\n```\n\n"}