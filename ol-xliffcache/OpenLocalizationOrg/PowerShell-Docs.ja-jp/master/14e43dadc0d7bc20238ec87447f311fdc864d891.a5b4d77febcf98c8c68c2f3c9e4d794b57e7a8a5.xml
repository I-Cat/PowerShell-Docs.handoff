{"nodes":[{"pos":[32,66],"content":"Wi-Fi using PSK | Microsoft Intune","needQuote":true,"nodes":[{"content":"Wi-Fi using PSK | Microsoft Intune","pos":[0,34]}]},{"pos":[80,153],"content":"Use Custom Configuration to create a Wi-Fi profile with a pre-shared key.","needQuote":true,"nodes":[{"content":"Use Custom Configuration to create a Wi-Fi profile with a pre-shared key.","pos":[0,73]}]},{"content":"Create a Wi-Fi profile with a pre-shared key","pos":[463,507]},{"content":"Here's how to use Intune’s <bpt id=\"p1\">**</bpt>Custom Configuration<ept id=\"p1\">**</ept> to create a Wi-Fi profile with a pre-shared key.","pos":[508,608],"source":"Here's how to use Intune’s **Custom Configuration** to create a Wi-Fi profile with a pre-shared key."},{"content":"This topic also has an example of how to create an EAP-based Wi-Fi profile.","pos":[609,684]},{"content":"You might find it easier to copy the code from a computer that connects to that network, as described below.","pos":[700,808]},{"pos":[811,990],"content":"For Android, you also have the option of using this <bpt id=\"p1\">[</bpt>Android PSK Generator<ept id=\"p1\">](http://johnathonb.com/2015/05/intune-android-pre-shared-key-generator/)</ept> provided by Johnathon Biersack.","source":"For Android, you also have the option of using this [Android PSK Generator](http://johnathonb.com/2015/05/intune-android-pre-shared-key-generator/) provided by Johnathon Biersack."},{"content":"You can add multiple networks and keys by adding more OMA-URI settings.","pos":[995,1066]},{"content":"For iOS, use Apple Configurator on a Mac station to set up the profile.","pos":[1070,1141]},{"content":"Alternatively, use this <bpt id=\"p1\">[</bpt>iOS PSK Mobile Config Generator<ept id=\"p1\">](http://johnathonb.com/2015/05/intune-ios-psk-mobile-config-generator/)</ept> provided by Johnathon Biersack.","pos":[1142,1302],"source":" Alternatively, use this [iOS PSK Mobile Config Generator](http://johnathonb.com/2015/05/intune-ios-psk-mobile-config-generator/) provided by Johnathon Biersack."},{"pos":[1309,1521],"content":"To create a Wi-Fi profile with a pre-shared key for Android or Windows or an EAP-based Wi-Fi profile, when you create a policy choose <bpt id=\"p1\">**</bpt>Custom Configuration<ept id=\"p1\">**</ept> for that device platform rather than a Wi-Fi profile.","source":"To create a Wi-Fi profile with a pre-shared key for Android or Windows or an EAP-based Wi-Fi profile, when you create a policy choose **Custom Configuration** for that device platform rather than a Wi-Fi profile."},{"content":"Provide a name and description.","pos":[1527,1558]},{"content":"Add a new OMA-URI setting:","pos":[1563,1589]},{"content":"a.","pos":[1594,1596]},{"content":"Enter a name for this Wi-Fi network setting.","pos":[1599,1643]},{"content":"b.","pos":[1648,1650]},{"content":"Enter a description of the OMA-URI setting or leave blank.","pos":[1653,1711]},{"content":"c.","pos":[1716,1718]},{"content":"<bpt id=\"p1\">**</bpt>Data Type<ept id=\"p1\">**</ept>: Set to \"String(XML)\"","pos":[1721,1756],"source":"**Data Type**: Set to \"String(XML)\""},{"content":"d.","pos":[1761,1763]},{"content":"<bpt id=\"p1\">**</bpt>OMA-URI<ept id=\"p1\">**</ept>:","pos":[1766,1778],"source":"**OMA-URI**:"},{"pos":[1786,1845],"content":"<bpt id=\"p1\">**</bpt>For Android<ept id=\"p1\">**</ept>: ./Vendor/MSFT/WiFi/Profile/<ph id=\"ph1\">&lt;SSID&gt;</ph>/Settings","source":"**For Android**: ./Vendor/MSFT/WiFi/Profile/<SSID>/Settings"},{"pos":[1852,1913],"content":"<bpt id=\"p1\">**</bpt>For Windows<ept id=\"p1\">**</ept>: ./Vendor/MSFT/WiFi/Profile/MyNetwork/WlanXml","source":"**For Windows**: ./Vendor/MSFT/WiFi/Profile/MyNetwork/WlanXml"},{"content":"Be sure to include the dot character at the beginning.","pos":[1929,1983]},{"pos":[1989,2108],"content":"SSID is the SSID for which you’re creating the policy. For example,\n`./Vendor/MSFT/WiFi/Profile/Hotspot-1/Settings`","leadings":["","    "],"nodes":[{"content":"SSID is the SSID for which you’re creating the policy.","pos":[0,54]},{"content":"For example, <ph id=\"ph1\">`./Vendor/MSFT/WiFi/Profile/Hotspot-1/Settings`</ph>","pos":[55,115],"source":" For example,\n`./Vendor/MSFT/WiFi/Profile/Hotspot-1/Settings`"}]},{"content":"e.","pos":[2112,2114]},{"content":"<bpt id=\"p1\">**</bpt>Value Field<ept id=\"p1\">**</ept> is where you paste your XML code.","pos":[2115,2164],"source":"**Value Field** is where you paste your XML code."},{"content":"Here’s an example.","pos":[2165,2183]},{"content":"Each value should be adapted to your network settings.","pos":[2184,2238]},{"content":"See the comments section of the code for some pointers.","pos":[2239,2294]},{"pos":[2298,2346],"content":"Choose <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>, save, and then deploy the policy.","source":"Choose **OK**, save, and then deploy the policy."},{"pos":[2354,2416],"content":"[!NOTE]\nThis policy can only be deployed to user groups.","leadings":["","    > "],"nodes":[{"content":"This policy can only be deployed to user groups.","pos":[8,56]}]},{"content":"The next time each device checks in, the policy will be applied, and a Wi-Fi profile will be created on the device.","pos":[2418,2533]},{"content":"The device will be able to connect to the network automatically.","pos":[2534,2598]},{"content":"Android or Windows Wi-Fi profile","pos":[2602,2634]},{"content":"Here’s an example of the XML code for an Android or Windows Wi-Fi profile:","pos":[2636,2710]},{"pos":[2732,2919],"content":"<ph id=\"ph1\">`&lt;protected&gt;false&lt;/protected&gt;`</ph>must be set to <bpt id=\"p1\">**</bpt>false<ept id=\"p1\">**</ept>, as <bpt id=\"p2\">**</bpt>true<ept id=\"p2\">**</ept> could cause device to expect an encrypted password and then try to decrypt it, which may result in a failed connection.","source":"`<protected>false</protected>`must be set to **false**, as **true** could cause device to expect an encrypted password and then try to decrypt it, which may result in a failed connection."},{"pos":[2926,3156],"content":"`<hex>53534944</hex>` should be set to the hexadecimal value of `<name><SSID of wifi profile></name>`.\n Windows 10 devices may return a false *0x87D1FDE8 Remediation failed* error, but will still be provisioned with the profile.","leadings":["","> "],"nodes":[{"content":"<ph id=\"ph1\">`&lt;hex&gt;53534944&lt;/hex&gt;`</ph> should be set to the hexadecimal value of <ph id=\"ph2\">`&lt;name&gt;&lt;SSID of wifi profile&gt;&lt;/name&gt;`</ph>.","pos":[0,102],"source":"`<hex>53534944</hex>` should be set to the hexadecimal value of `<name><SSID of wifi profile></name>`."},{"content":"Windows 10 devices may return a false <bpt id=\"p1\">*</bpt>0x87D1FDE8 Remediation failed<ept id=\"p1\">*</ept> error, but will still be provisioned with the profile.","pos":[104,228],"source":" Windows 10 devices may return a false *0x87D1FDE8 Remediation failed* error, but will still be provisioned with the profile."}]},{"content":"EAP-based Wi-Fi profile","pos":[4841,4864]},{"content":"Here’s  an example of the XML code for an EAP-based Wi-Fi profile:","pos":[4865,4931]},{"content":"Create the XML file from an existing Wi-Fi connection","pos":[9017,9070]},{"content":"You can also create an XML file from an existing Wi-Fi connection:","pos":[9071,9137]},{"content":"On a computer that is connected to or has recently connected to the wireless network, open the following folder: C:\\ProgramData\\Microsoft\\Wlansvc\\Profiles\\Interfaces\\{guid}.","pos":[9141,9314]},{"content":"It’s best to use a computer that has not connected to many wireless networks, because you’ll have to search through each profile to find the right one.","pos":[9320,9471]},{"content":"Search through the XML files to locate the one with the right name.","pos":[9479,9546]},{"content":"After you have located the correct XML file, copy and paste the XML code into the Data field of the OMA-URI settings page.","pos":[9554,9676]},{"content":"Deploy the policy","pos":[9681,9698]},{"pos":[9704,9814],"content":"In the <bpt id=\"p1\">**</bpt>Policy<ept id=\"p1\">**</ept> workspace, select the policy that you want to deploy, and then choose <bpt id=\"p2\">**</bpt>Manage Deployment<ept id=\"p2\">**</ept>.","source":"In the **Policy** workspace, select the policy that you want to deploy, and then choose **Manage Deployment**."},{"pos":[9820,9860],"content":"In the <bpt id=\"p1\">**</bpt>Manage Deployment<ept id=\"p1\">**</ept> dialog box:","source":"In the **Manage Deployment** dialog box:"},{"pos":[9870,9999],"content":"<bpt id=\"p1\">**</bpt>To deploy the policy<ept id=\"p1\">**</ept> - Select one or more groups to which you want to deploy the policy, and then choose <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>.","source":"**To deploy the policy** - Select one or more groups to which you want to deploy the policy, and then choose **Add** &gt; **OK**."},{"pos":[10009,10078],"content":"<bpt id=\"p1\">**</bpt>To close the dialog box without deploying it<ept id=\"p1\">**</ept> - Choose <bpt id=\"p2\">**</bpt>Cancel<ept id=\"p2\">**</ept>.","source":"**To close the dialog box without deploying it** - Choose **Cancel**."},{"content":"When you select a deployed policy, you can view more information about the deployment in the lower part of the policies list.","pos":[10080,10205]},{"content":"See also","pos":[10211,10219]},{"pos":[10220,10301],"content":"<bpt id=\"p1\">[</bpt>Wi-Fi connections in Microsoft Intune<ept id=\"p1\">](wi-fi-connections-in-microsoft-intune.md)</ept>","source":"[Wi-Fi connections in Microsoft Intune](wi-fi-connections-in-microsoft-intune.md)"}],"content":"---\n# required metadata\n\ntitle: Wi-Fi using PSK | Microsoft Intune\ndescription: Use Custom Configuration to create a Wi-Fi profile with a pre-shared key.\nkeywords:\nauthor: nbigman\nmanager: angrobe\nms.date: 07/21/2016\nms.topic: article\nms.prod:\nms.service: microsoft-intune\nms.technology:\nms.assetid: e977c7c7-e204-47a6-b851-7ad7673ceaab\n\n# optional metadata\n\n#ROBOTS:\n#audience:\n#ms.devlang:\nms.reviewer: karanda\nms.suite: ems\n#ms.tgt_pltfrm:\n#ms.custom:\n\n\n---\n# Create a Wi-Fi profile with a pre-shared key\nHere's how to use Intune’s **Custom Configuration** to create a Wi-Fi profile with a pre-shared key. This topic also has an example of how to create an EAP-based Wi-Fi profile.\n\n> [!NOTE]\n-   You might find it easier to copy the code from a computer that connects to that network, as described below.\n- For Android, you also have the option of using this [Android PSK Generator](http://johnathonb.com/2015/05/intune-android-pre-shared-key-generator/) provided by Johnathon Biersack.\n-   You can add multiple networks and keys by adding more OMA-URI settings.\n-  For iOS, use Apple Configurator on a Mac station to set up the profile. Alternatively, use this [iOS PSK Mobile Config Generator](http://johnathonb.com/2015/05/intune-ios-psk-mobile-config-generator/) provided by Johnathon Biersack.\n\n\n1.  To create a Wi-Fi profile with a pre-shared key for Android or Windows or an EAP-based Wi-Fi profile, when you create a policy choose **Custom Configuration** for that device platform rather than a Wi-Fi profile.\n\n2.  Provide a name and description.\n3.  Add a new OMA-URI setting:\n\n   a.   Enter a name for this Wi-Fi network setting.\n\n   b.   Enter a description of the OMA-URI setting or leave blank.\n\n   c.   **Data Type**: Set to \"String(XML)\"\n\n   d.   **OMA-URI**:\n\n    - **For Android**: ./Vendor/MSFT/WiFi/Profile/<SSID>/Settings\n    - **For Windows**: ./Vendor/MSFT/WiFi/Profile/MyNetwork/WlanXml\n\n    > [!NOTE]\nBe sure to include the dot character at the beginning.\n\n    SSID is the SSID for which you’re creating the policy. For example,\n    `./Vendor/MSFT/WiFi/Profile/Hotspot-1/Settings`\n\n  e. **Value Field** is where you paste your XML code. Here’s an example. Each value should be adapted to your network settings. See the comments section of the code for some pointers.\n4. Choose **OK**, save, and then deploy the policy.\n\n    > [!NOTE]\n    > This policy can only be deployed to user groups.\n\nThe next time each device checks in, the policy will be applied, and a Wi-Fi profile will be created on the device. The device will be able to connect to the network automatically.\n## Android or Windows Wi-Fi profile\n\nHere’s an example of the XML code for an Android or Windows Wi-Fi profile:\n\n> [!IMPORTANT]\n> \n> `<protected>false</protected>`must be set to **false**, as **true** could cause device to expect an encrypted password and then try to decrypt it, which may result in a failed connection.\n> \n>  `<hex>53534944</hex>` should be set to the hexadecimal value of `<name><SSID of wifi profile></name>`.\n>  Windows 10 devices may return a false *0x87D1FDE8 Remediation failed* error, but will still be provisioned with the profile.\n\n    <!--\n    <Name of wifi profile> = Name of profile\n    <SSID of wifi profile> = Plain text of SSID. Does not need to be escaped, could be <name>Your Company's Network</name>\n    <nonBroadcast><true/false></nonBroadcast>\n    <Type of authentication> = Type of authentication used by the network, such as WPA2PSK.\n    <Type of encryption> = Type of encryption used by the network\n    <protected>false</protected> do not change this value, as true could cause device to expect an encrypted password and then try to decrypt it, which may result in a failed connection.\n    <password> = Password to connect to the network\n    <hex>53534944</hex> should be set to the hexadecimal value of <name><SSID of wifi profile></name>\n    -->\n    <WLANProfile\n    xmlns=\"http://www.microsoft.com/networking/WLAN/profile/v1\">\n      <name><Name of wifi profile></name>\n      <SSIDConfig>\n        <SSID>\n          <hex>53534944</hex>\n        <name><SSID of wifi profile></name>\n        </SSID>\n        <nonBroadcast>false</nonBroadcast>\n      </SSIDConfig>\n      <connectionType>ESS</connectionType>\n      <connectionMode>auto</connectionMode>\n      <autoSwitch>false</autoSwitch>\n      <MSM>\n        <security>\n          <authEncryption>\n            <authentication><Type of authentication></authentication>\n            <encryption><Type of encryption></encryption>\n            <useOneX>false</useOneX>\n          </authEncryption>\n          <sharedKey>\n            <keyType>networkKey</keyType>\n            <protected>false</protected>\n            <keyMaterial>MyPassword</keyMaterial>\n          </sharedKey>\n          <keyIndex>0</keyIndex>\n        </security>\n      </MSM>\n    </WLANProfile>\n\n## EAP-based Wi-Fi profile\nHere’s  an example of the XML code for an EAP-based Wi-Fi profile:\n\n    <WLANProfile xmlns=\"http://www.microsoft.com/networking/WLAN/profile/v1\">\n      <name>testcert</name>\n      <SSIDConfig>\n        <SSID>\n          <hex>7465737463657274</hex>\n          <name>testcert</name>\n        </SSID>\n        <nonBroadcast>true</nonBroadcast>\n      </SSIDConfig>\n      <connectionType>ESS</connectionType>\n      <connectionMode>auto</connectionMode>\n      <autoSwitch>false</autoSwitch>\n      <MSM>\n        <security>\n          <authEncryption>\n            <authentication>WPA2</authentication>\n            <encryption>AES</encryption>\n            <useOneX>true</useOneX>\n            <FIPSMode     xmlns=\"http://www.microsoft.com/networking/WLAN/profile/v2\">false</FIPSMode>\n          </authEncryption>\n          <PMKCacheMode>disabled</PMKCacheMode>\n          <OneX xmlns=\"http://www.microsoft.com/networking/OneX/v1\">\n            <cacheUserData>false</cacheUserData>\n            <authMode>user</authMode>\n            <EAPConfig>\n              <EapHostConfig     xmlns=\"http://www.microsoft.com/provisioning/EapHostConfig\">\n                <EapMethod>\n                  <Type xmlns=\"http://www.microsoft.com/provisioning/EapCommon\">13</Type>\n                  <VendorId xmlns=\"http://www.microsoft.com/provisioning/EapCommon\">0</VendorId>\n                  <VendorType xmlns=\"http://www.microsoft.com/provisioning/EapCommon\">0</VendorType>\n                  <AuthorId xmlns=\"http://www.microsoft.com/provisioning/EapCommon\">0</AuthorId>\n                </EapMethod>\n                <Config xmlns=\"http://www.microsoft.com/provisioning/EapHostConfig\">\n                  <Eap xmlns=\"http://www.microsoft.com/provisioning/BaseEapConnectionPropertiesV1\">\n                    <Type>13</Type>\n                    <EapType xmlns=\"http://www.microsoft.com/provisioning/EapTlsConnectionPropertiesV1\">\n                      <CredentialsSource>\n                        <CertificateStore>\n                          <SimpleCertSelection>true</SimpleCertSelection>\n                        </CertificateStore>\n                      </CredentialsSource>\n                      <ServerValidation>\n                        <DisableUserPromptForServerValidation>false</DisableUserPromptForServerValidation>\n                        <ServerNames></ServerNames>\n                      </ServerValidation>\n                      <DifferentUsername>false</DifferentUsername>\n                      <PerformServerValidation xmlns=\"http://www.microsoft.com/provisioning/EapTlsConnectionPropertiesV2\">false</PerformServerValidation>\n                      <AcceptServerName xmlns=\"http://www.microsoft.com/provisioning/EapTlsConnectionPropertiesV2\">false</AcceptServerName>\n                      <TLSExtensions xmlns=\"http://www.microsoft.com/provisioning/EapTlsConnectionPropertiesV2\">\n                        <FilteringInfo xmlns=\"http://www.microsoft.com/provisioning/EapTlsConnectionPropertiesV3\">\n                          <AllPurposeEnabled>true</AllPurposeEnabled>\n                          <CAHashList Enabled=\"true\">\n                            <IssuerHash>75 f5 06 9c a4 12 0e 9b db bc a1 d9 9d d0 f0 75 fa 3b b8 78 </IssuerHash>\n                          </CAHashList>\n                          <EKUMapping>\n                            <EKUMap>\n                              <EKUName>Client Authentication</EKUName>\n                              <EKUOID>1.3.6.1.5.5.7.3.2</EKUOID>\n                            </EKUMap>\n                          </EKUMapping>\n                          <ClientAuthEKUList Enabled=\"true\"/>\n                          <AnyPurposeEKUList Enabled=\"false\">\n                            <EKUMapInList>\n                              <EKUName>Client Authentication</EKUName>\n                            </EKUMapInList>\n                          </AnyPurposeEKUList>\n                        </FilteringInfo>\n                      </TLSExtensions>\n                    </EapType>\n                  </Eap>\n                </Config>\n              </EapHostConfig>\n            </EAPConfig>\n          </OneX>\n        </security>\n      </MSM>\n    </WLANProfile>\n\n## Create the XML file from an existing Wi-Fi connection\nYou can also create an XML file from an existing Wi-Fi connection:\n1. On a computer that is connected to or has recently connected to the wireless network, open the following folder: C:\\ProgramData\\Microsoft\\Wlansvc\\Profiles\\Interfaces\\{guid}.\n\n    It’s best to use a computer that has not connected to many wireless networks, because you’ll have to search through each profile to find the right one.\n3.     Search through the XML files to locate the one with the right name.\n4.     After you have located the correct XML file, copy and paste the XML code into the Data field of the OMA-URI settings page.\n\n## Deploy the policy\n\n1.  In the **Policy** workspace, select the policy that you want to deploy, and then choose **Manage Deployment**.\n\n2.  In the **Manage Deployment** dialog box:\n\n    -   **To deploy the policy** - Select one or more groups to which you want to deploy the policy, and then choose **Add** &gt; **OK**.\n\n    -   **To close the dialog box without deploying it** - Choose **Cancel**.\n\nWhen you select a deployed policy, you can view more information about the deployment in the lower part of the policies list.\n\n### See also\n[Wi-Fi connections in Microsoft Intune](wi-fi-connections-in-microsoft-intune.md)\n"}