{"nodes":[{"pos":[13,69],"content":"DSC function to query node information from pull server.","needQuote":true,"nodes":[{"content":"DSC function to query node information from pull server.","pos":[0,56]}]},{"pos":[102,116],"content":"powershell,DSC","needQuote":true,"nodes":[{"content":"powershell,DSC","pos":[0,14]}]},{"content":"DSC function to query node information from pull server.","pos":[214,270]},{"content":"Replace the <ph id=\"ph1\">`Uri`</ph> parameter with the URI for your pull server.","pos":[1039,1101],"source":"Replace the `Uri` parameter with the URI for your pull server."},{"content":"If you want the node information in XML format, set <ph id=\"ph1\">`ContentType`</ph> to <ph id=\"ph2\">`application/xml`</ph>.","pos":[1102,1189],"source":" If you want the node information in XML format, set `ContentType` to `application/xml`."},{"pos":[1191,1270],"content":"To retrieve the node information from the <ph id=\"ph1\">`$json`</ph> parameter, use the following:","source":"To retrieve the node information from the `$json` parameter, use the following:"}],"content":"---\ntitle:   DSC function to query node information from pull server.\nms.date:  2016-05-16\nkeywords:  powershell,DSC\ndescription:  \nms.topic:  article\nauthor:  eslesar\nmanager:  dongill\nms.prod:  powershell\n---\n\n# DSC function to query node information from pull server.\n\n```powershell\nfunction QueryNodeInformation\n{\nParam (      \n       [string] $Uri =\n\"http://localhost:7070/PSDSCComplianceServer.svc/Status\",                         \n       [string] $ContentType = \"application/json\"           \n     )\n\n  Write-Host \"Querying node information from pull server URI  = $Uri\" -ForegroundColor Green\n\n  Write-Host \"Querying node status in content type  = $ContentType \" -ForegroundColor Green\n\n   $response = Invoke-WebRequest -Uri $Uri -Method Get -ContentType $ContentType -UseDefaultCredentials -Headers \n    @{Accept = $ContentType}\n\n   if($response.StatusCode -ne 200)\n {\n     Write-Host \"node information was not retrieved.\" -ForegroundColor Red\n }\n\n $jsonResponse = ConvertFrom-Json $response.Content\n\n  return $jsonResponse\n}\n```\n\nReplace the `Uri` parameter with the URI for your pull server. If you want the node information in XML format, set `ContentType` to `application/xml`.\n\nTo retrieve the node information from the `$json` parameter, use the following:\n\n```powershell\n$json = QueryNodeInformation â€“Uri http://localhost:7070/PSDSCComplianceServer.svc/Status \n\n$json.value | Format-Table TargetName, ConfigurationId, ServerChecksum, NodeCompliant, LastComplianceTime, StatusCode\n```\n\n"}